{"version":3,"sources":["lib/util.js","lib/NumberInput.js","lib/DecimalInput.js","lib/CardNumberInput.js","Example.js","index.js"],"names":["NUMBER_FORMAT_FARSI","NUMBER_FORMAT_LATIN","mapToFarsi","str","toString","replace","e","String","fromCharCode","charCodeAt","mapToLatin","stripAnyThingButDigits","repeatStr","n","r","i","NumberInput","props","readValuesFromProps","value","valueToShow","mapValue","numberFormat","selectionStart","undefined","selectionEnd","handleKeyDown","event","disabled","readOnly","preventDefault","keyCode","updateState","deleteValue","target","updateValue","key","hideKeyboard","ctrlKey","metaKey","inputRef","current","blur","handlePaste","enteredValue","clipboardData","window","getData","handleInput","values","recheckValue","newState","forceFireChange","fireOnChangeInTheEnd","document","activeElement","setSelectionRange","fireOnChange","element","enteredValueMapped","maxLength","length","substring","qty","onChange","name","ref","getInputRef","React","createRef","nextProps","nextState","this","shallowEqualObjects","style","className","rest","onInput","onPast","onKeyDown","pattern","inputMode","type","defaultValue","dir","onPaste","Component","DecimalInput","defaultThousandSeparator","defaultDecimalSeparator","asString","updateElementValue","decimalSeparator","maxDecimal","negate","stripAnyThingButNumber","firstHyphenIndex","indexOf","mapDecimalSeparator","decimalSeparatorRegex","valueIsValid","currentValue","valueBeforeCursor","valueAfterCursor","countThousandSeparator","stripThousandSeparator","latinNumber","firstNonZeroDigit","maxDigits","separated","addThousandSeparator","valueToShowWithSeparator","checkValue","Number","alreadFoundDecimalSeparator","alreadyPassedDecimalSeparator","groupCount","c","charAt","thousandSeparator","match","thousandSeparatorRegex","numberRegex","RegExp","CARD_SEPERATOR","SEPERATORES_REGEX","MATCH_REGEX","EMPTY_VALUE","CardNumberInput","readCardNumberFromValue","latinNumberValue","valueWithNoSeperator","match4Digit","readValues","isValueValidCardNumber","handleFocus","isValueEmpty","jumpTo","onFocus","handleBlur","onBlur","jumpToNext","whereTheCaretIs","whereIsCaret","jumpToPrevious","section","caretPosition","shiftKey","Math","abs","onShowDialog","valueFromClipboard","inputValue","seperatorBefore","lastIndexOf","seperatorAfter","floor","resetValues","newValues","nextSeperator","previousValue","emptyValue","bind","Example","state","Number1","Number2","Number3","color","bgColor","Tel1","value1","handleChange","t","setState","console","log","handleValueChange","substr","toggleColor","toggleBgColor","toggleDisabled","toggleReadOnly","clearInterval","interval","backgroundColor","Fragment","autoComplete","width","placeholder","onClick","render","margin","getElementById"],"mappings":"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","file":"static/js/main.524449a2.chunk.js","sourcesContent":["export const NUMBER_FORMAT_FARSI = 'FARSI';\nexport const NUMBER_FORMAT_LATIN = 'LATIN';\n\nexport function mapToFarsi(str) {\n  if(!str) return str;\n  return str.toString().replace(/[1234567890]/gi, e => String.fromCharCode(e.charCodeAt(0) + 1728))\n}\n\nexport function mapToLatin(str) {\n  if(!str) return str;\n  return str.toString().replace(/[۱۲۳۴۵۶۷۸۹۰]/gi, e => String.fromCharCode(e.charCodeAt(0) - 1728))\n}\n\nexport function stripAnyThingButDigits(str) {\n  if(!str) return str;\n  return str.toString().replace(/[^1234567890۱۲۳۴۵۶۷۸۹۰]/gi, '');\n}\n\nexport function hasStringACharToGoToNext (str) {\n  if(str.indexOf('.')>=0) return true;\n  if(str.indexOf(',')>=0) return true;\n  // if(str.indexOf('/')>=0) return true;\n  if(str.indexOf('-')>=0) return true;\n  if(str.indexOf(';')>=0) return true;\n  if(str.indexOf('*')>=0) return true;\n  if(str.indexOf('#')>=0) return true;\n  if(str.indexOf(' ')>=0) return true;\n  if(str.indexOf('،')>=0) return true;\n  return false;\n}\n\n/**\n * @param {string} str\n * @param {number} n\n */\nexport function repeatStr(str, n){\n  let r = '';\n  for(let i=0; i<n; i++){\n    r += str;\n  }\n  return r;\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport shallowEqualObjects from 'shallow-equal/objects';\n\nimport { mapToFarsi, mapToLatin, stripAnyThingButDigits, NUMBER_FORMAT_FARSI, NUMBER_FORMAT_LATIN} from './util';\n\nclass NumberInput extends Component {\n\n  static propTypes = {\n    /**\n     * The ref to pass on the input, if empty it will be created internally\n     */\n    inputRef: PropTypes.any,\n    getInputRef: PropTypes.any,\n    /**\n     * The name that will be set while firing the onChange event in the target object\n     */\n    name: PropTypes.string,\n    /**\n     * Callback function that is fired when the cart number value changes.\n     */\n    onChange: PropTypes.func,\n    /**\n     * Override the inline-styles of the root element.\n     */\n    style: PropTypes.object,\n    /**\n     * The css class name of the root element.\n     */\n    className: PropTypes.string,\n    /**\n     * Disables the number input.\n     */\n    disabled: PropTypes.bool,\n    /**\n     * makes the number input readonly.\n     */\n    readOnly: PropTypes.bool,\n    /**\n     * accepted number digit count.\n     */\n    maxLength: PropTypes.number,\n    /**\n     * Callback function that is fired when a click event occurs on the input.\n     */\n    onClick: PropTypes.func,\n    /**\n     * Callback function that is fired when the input gains focus.\n     */\n    onFocus: PropTypes.func,\n    /**\n     * Sets the value for the number input.\n     */\n    value: PropTypes.string,\n  };\n\n  constructor(props) {\n    super(props);\n    let ref = props.inputRef || props.getInputRef;\n    if(ref && typeof ref === 'function'){\n      ref = ref();\n    }\n    this.inputRef = ref ? ref : React.createRef();\n    // this.rr = React.createRef();\n\n    this.values = this.readValuesFromProps(props);\n  }\n\n  readValuesFromProps = (props) => {\n    const value = props.value || '';\n    const valueToShow = this.mapValue(value, props.numberFormat);\n\n    return {\n      value,\n      valueToShow,\n      selectionStart: undefined,\n      selectionEnd: undefined,\n    };\n  };\n\n  handleKeyDown = (event) => {\n    // console.log('keyCode: ', event.keyCode, 'key: ', event.key);\n    if(this.props.disabled || this.props.readOnly) {\n      event.preventDefault();\n    }else if(event.keyCode===8) { //backspace\n      event.preventDefault();\n      this.updateState(this.deleteValue(event.target, -1));\n    }else if(event.keyCode===46){ //delete\n      event.preventDefault();\n      this.updateState(this.deleteValue(event.target, 1));\n    }else if(event.keyCode>=48 && event.keyCode<=57){ //digits\n      event.preventDefault();\n      // console.log('digit');\n      this.updateState(this.updateValue(event.target, (event.keyCode - 48).toString(), this.props.numberFormat));\n    }else if(event.keyCode>=96 && event.keyCode<=105){ //digits\n      event.preventDefault();\n      // console.log('digit');\n      this.updateState(this.updateValue(event.target, (event.keyCode - 96).toString(), this.props.numberFormat));\n    }else if(event.key>='۰' && event.key<='۹'){ //digits\n      event.preventDefault();\n      // console.log('digit');\n      this.updateState(this.updateValue(event.target, event.key, this.props.numberFormat));\n    }else if(event.keyCode>=35 && event.keyCode<=40){ //arrows\n    }else if(event.keyCode===9){ //tab\n    }else if(event.keyCode===13){ //return\n      this.hideKeyboard();\n    }else if((event.ctrlKey || event.metaKey) && (event.keyCode===67 || event.keyCode===86)){ //copy/paste\n    }else if((event.ctrlKey || event.metaKey) && (event.keyCode===82)){ //refresh key\n    }else if((event.ctrlKey || event.metaKey) && (event.keyCode===82)){ //refresh key\n    }else if((event.ctrlKey || event.metaKey) && (event.keyCode===73)){ //inspector\n    }else if((event.ctrlKey || event.metaKey) && (event.keyCode===65)){ //select all\n    }else if(event.keyCode>=112 && event.keyCode<=123){ // All other F keys\n    }else if(event.keyCode===229){ //android bug workaround\n    }else{\n      // console.log('other');\n      // console.log('keyCode: ', event.keyCode, 'key: ', event.key, 'ctrlKey: ', event.ctrlKey);\n      // this.rr.current.innerText = `keyCode: ${event.keyCode} key:  ${event.key} ctrlKey: ${event.ctrlKey}`;\n      event.preventDefault();\n    }\n  };\n\n  hideKeyboard = () => {\n    this.inputRef.current.blur();\n  }\n\n  handlePaste = (event) => {\n    event.preventDefault();\n    if(this.props.disabled || this.props.readOnly) return;\n\n    const enteredValue = stripAnyThingButDigits((event.clipboardData || window.clipboardData).getData('text'));\n\n    this.updateState(this.updateValue(event.target, enteredValue, this.props.numberFormat));\n  };\n\n  handleInput = (event) => {\n    if(this.props.disabled || this.props.readOnly) return;\n    if(this.values.valueToShow===event.target.value) return;\n\n    const enteredValue = stripAnyThingButDigits(event.target.value);\n\n    this.updateState(this.recheckValue(event.target, enteredValue, this.props.numberFormat), true);\n  };\n\n  mapValue = (value, numberFormat) => {\n    if(numberFormat===NUMBER_FORMAT_FARSI){\n      return mapToFarsi(value);\n    }else if(numberFormat===NUMBER_FORMAT_LATIN){\n      return mapToLatin(value);\n    }\n    return mapToFarsi(value);\n  };\n\n\n  updateState = (newState, forceFireChange) => {\n    if(!newState) return;\n\n    this.values = newState;\n    let fireOnChangeInTheEnd = false;\n    if(this.inputRef.current.value !== this.values.valueToShow){\n      fireOnChangeInTheEnd = true;\n      this.inputRef.current.value = this.values.valueToShow;\n    }\n    if(this.inputRef.current===document.activeElement){\n      // console.log('has focus :D');\n      this.inputRef.current.setSelectionRange(this.values.selectionStart, this.values.selectionEnd);\n    }else{\n      // console.log('has not focus :(');\n    }\n    if(fireOnChangeInTheEnd || forceFireChange){\n      this.fireOnChange();\n    }\n  };\n\n  updateValue = (element, enteredValue, numberFormat) => {\n    const enteredValueMapped = this.mapValue(enteredValue, numberFormat);\n    let valueToShow = element.value;\n    let selectionStart = element.selectionStart;\n    let selectionEnd = element.selectionEnd;\n\n    if(this.props.maxLength && valueToShow.length + enteredValue.length > this.props.maxLength){\n      return;\n    }\n\n    valueToShow = valueToShow.substring(0, selectionStart) + enteredValueMapped + valueToShow.substring(selectionEnd);\n\n    selectionStart += enteredValueMapped.length;\n    selectionEnd = selectionStart;\n\n    const value = mapToLatin(valueToShow);\n\n    return {\n      value,\n      valueToShow,\n      selectionStart,\n      selectionEnd,\n    };\n  };\n\n  recheckValue = (element, enteredValue, numberFormat) => {\n    let valueToShow = this.mapValue(enteredValue, numberFormat);\n    let selectionStart = element.selectionStart;\n    let selectionEnd = element.selectionEnd;\n\n    const value = mapToLatin(valueToShow);\n\n    return {\n      value,\n      valueToShow,\n      selectionStart,\n      selectionEnd,\n    };\n  };\n\n  deleteValue = (element, qty) => {\n    let valueToShow = element.value;\n    let selectionStart = element.selectionStart;\n    let selectionEnd = element.selectionEnd;\n\n    // console.log({selectionStart, selectionEnd})\n\n    if(selectionStart===selectionEnd){\n      if(qty < 0) {\n        if(selectionStart===0) return;\n        valueToShow = valueToShow.substring(0, selectionStart + qty) + valueToShow.substring(selectionEnd);\n        selectionStart += qty;\n      }else{\n        if(selectionEnd===valueToShow.length) return;\n        valueToShow = valueToShow.substring(0, selectionStart) + valueToShow.substring(selectionEnd+qty);\n      }\n    }else{\n      valueToShow = valueToShow.substring(0, selectionStart) + valueToShow.substring(selectionEnd);\n    }\n\n    selectionEnd = selectionStart;\n\n    const value = mapToLatin(valueToShow);\n\n    return {\n      value,\n      valueToShow,\n      selectionStart,\n      selectionEnd,\n    };\n  };\n\n  fireOnChange = () => {\n    if(this.props.onChange){\n      this.props.onChange({target: {name: this.props.name, value: this.values.value}});\n    }\n  };\n\n  shouldComponentUpdate(nextProps, nextState){\n    if(nextProps.value !== this.values.value || nextProps.numberFormat !== this.props.numberFormat){\n      this.updateState(this.readValuesFromProps(nextProps));\n    }\n    if(!shallowEqualObjects(nextProps.style, this.props.style)){\n      return true;\n    }\n    if(nextProps.className !== this.props.className){\n      this.inputRef.current.className = nextProps.className;\n    }\n    if(nextProps.disabled !== this.props.disabled){\n      this.inputRef.current.disabled = nextProps.disabled;\n    }\n    if(nextProps.readOnly !== this.props.readOnly){\n      this.inputRef.current.readOnly = nextProps.readOnly;\n    }\n    return false;\n  }\n\n  render() {\n    const {value, onChange, onInput, onPast, onKeyDown, pattern, inputMode, type, ref, inputRef, getInputRef, numberFormat, defaultValue, ...rest} = this.props;\n    const {valueToShow} = this.values;\n\n    // const localInputMode = this.props.type === 'tel' ? 'tel' : 'numeric'; // as we use type=tel, then we do not need it any more\n    // const localPattern = '[0-9]*'; // it has problem with the form checking, as we insert persian digit, it is not acceptable for the browser\n\n    return (\n      <input\n        ref={this.inputRef}\n        type={\"tel\"} // I tried to use text and using inputMode, but it does not work on Safari\n        // inputMode={localInputMode}\n        // xInputMode={localnputMode} // in firefox OS it is x-inputmode, I do not know how to handle it\n        dir={\"ltr\"}\n        // pattern={localPattern}\n        defaultValue={valueToShow}\n        onKeyDown={this.handleKeyDown}\n        onPaste={this.handlePaste}\n        onInput={this.handleInput}\n        {...rest}\n      />\n      );\n    //<p ref={this.rr} type={\"text\"}>empty</p></div>\n\n  }\n}\nexport default NumberInput;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport shallowEqualObjects from 'shallow-equal/objects';\n\nimport { mapToFarsi, mapToLatin, NUMBER_FORMAT_FARSI, NUMBER_FORMAT_LATIN} from './util';\n\nclass DecimalInput extends Component {\n\n  static propTypes = {\n    /**\n     * The ref to pass on the input, if empty it will be created internally\n     */\n    inputRef: PropTypes.any,\n    getInputRef: PropTypes.any,\n    /**\n     * The name that will be set while firing the onChange event in the target object\n     */\n    name: PropTypes.string,\n    /**\n     * Callback function that is fired when the cart number value changes.\n     */\n    onChange: PropTypes.func,\n    /**\n     * Override the inline-styles of the root element.\n     */\n    style: PropTypes.object,\n    /**\n     * The css class name of the root element.\n     */\n    className: PropTypes.string,\n    /**\n     * Disables the decimal input.\n     */\n    disabled: PropTypes.bool,\n    /**\n     * makes the decimal input readonly.\n     */\n    readOnly: PropTypes.bool,\n    /**\n     * Callback function that is fired when a click event occurs on the input.\n     */\n    onClick: PropTypes.func,\n    /**\n     * Callback function that is fired when the input gains focus.\n     */\n    onFocus: PropTypes.func,\n    /**\n     * Sets the value for the decimal input.\n     */\n    value: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.number\n    ]),\n    /**\n     * Sets the thousand separator\n     */\n    thousandSeparator: PropTypes.string,\n    /**\n     * Sets the decimal separator\n     */\n    decimalSeparator: PropTypes.string,\n    /**\n     * makes the value string, it is useful for big decimals.\n     */\n    asString: PropTypes.bool,\n    /**\n     * max digits before decimal separator.\n     */\n    maxDigits: PropTypes.number,\n    /**\n     * max digits after decimal separator.\n     */\n    maxDecimal: PropTypes.number,\n  };\n\n  constructor(props) {\n    super(props);\n    let ref = props.inputRef || props.getInputRef;\n    if(ref && typeof ref === 'function'){\n      ref = ref();\n    }\n    this.inputRef = ref ? ref : React.createRef();\n    // this.rr = React.createRef();\n\n    this.thousandSeparator = props.thousandSeparator || this.defaultThousandSeparator();\n    this.decimalSeparator = props.decimalSeparator || this.defaultDecimalSeparator();\n    this.thousandSeparatorRegex = new RegExp(`[${this.thousandSeparator}]`, 'g');\n    this.decimalSeparatorRegex = new RegExp(`[.${this.decimalSeparator}]`, 'g');\n    this.numberRegex = new RegExp(`[^-1234567890۱۲۳۴۵۶۷۸۹۰.${this.decimalSeparator}]`, 'gi');\n    this.values = this.readValuesFromProps(props);\n  }\n\n  defaultThousandSeparator = () => {\n    return ',';\n  };\n\n  defaultDecimalSeparator = () => {\n    return '.';\n  };\n\n  readValuesFromProps = (props) => {\n    if(props.value || props.value===0){\n      const value = props.value.toString();\n      return this.updateValue('', 0, 0, value, props.numberFormat, props.asString);\n    }\n\n    return {\n      value: undefined,\n      valueToShow: '',\n      selectionStart: undefined,\n      selectionEnd: undefined,\n    };\n  };\n\n  handleKeyDown = (event) => {\n    // console.log('keyCode: ', event.keyCode, 'key: ', event.key);\n    if(this.props.disabled || this.props.readOnly) {\n      event.preventDefault();\n    }else if(event.keyCode===8) { //backspace\n      event.preventDefault();\n      this.updateState(this.deleteValue(event.target, -1, this.props.asString));\n    }else if(event.keyCode===46){ //delete\n      event.preventDefault();\n      this.updateState(this.deleteValue(event.target, 1, this.props.asString));\n    }else if(event.keyCode>=48 && event.keyCode<=57){ //digits\n      event.preventDefault();\n      // console.log('digit');\n      this.updateState(this.updateElementValue(event.target, (event.keyCode - 48).toString(), this.props.numberFormat, this.props.asString));\n    }else if(event.keyCode>=96 && event.keyCode<=105){ //digits\n      event.preventDefault();\n      // console.log('digit');\n      this.updateState(this.updateElementValue(event.target, (event.keyCode - 96).toString(), this.props.numberFormat, this.props.asString));\n    }else if(event.key>='۰' && event.key<='۹'){ //digits\n      event.preventDefault();\n      // console.log('digit');\n      this.updateState(this.updateElementValue(event.target, event.key, this.props.numberFormat, this.props.asString));\n    }else if(event.key===this.decimalSeparator || event.keyCode===190){ //point\n      event.preventDefault();\n      if(this.props.maxDecimal===null || this.props.maxDecimal===undefined || this.props.maxDecimal > 0){\n        this.updateState(this.updateElementValue(event.target, this.decimalSeparator, this.props.numberFormat, this.props.asString));\n      }\n    }else if(event.key==='-' || event.keyCode===189){ // -\n      event.preventDefault();\n      this.updateState(this.negate());\n    }else if(event.keyCode>=35 && event.keyCode<=40){ //arrows\n    }else if(event.keyCode===9){ //tab\n    }else if(event.keyCode===13){ //return\n      this.hideKeyboard();\n    }else if((event.ctrlKey || event.metaKey) && (event.keyCode===67 || event.keyCode===86)){ //copy/paste\n    }else if((event.ctrlKey || event.metaKey) && (event.keyCode===82)){ //refresh key\n    }else if((event.ctrlKey || event.metaKey) && (event.keyCode===82)){ //refresh key\n    }else if((event.ctrlKey || event.metaKey) && (event.keyCode===73)){ //inspector\n    }else if((event.ctrlKey || event.metaKey) && (event.keyCode===65)){ //select all\n    }else if(event.keyCode>=112 && event.keyCode<=123){ // All other F keys\n    }else if(event.keyCode===229){ //android bug workaround\n    }else{\n      // console.log('other');\n      // console.log('keyCode: ', event.keyCode, 'key: ', event.key, 'ctrlKey: ', event.ctrlKey);\n      // this.rr.current.innerText = `keyCode: ${event.keyCode} key:  ${event.key} ctrlKey: ${event.ctrlKey}`;\n      event.preventDefault();\n    }\n  };\n\n  hideKeyboard = () => {\n    this.inputRef.current.blur();\n  }\n\n  handlePaste = (event) => {\n    event.preventDefault();\n    if(this.props.disabled || this.props.readOnly) return;\n\n    let enteredValue = this.stripAnyThingButNumber((event.clipboardData || window.clipboardData).getData('text'));\n    if(this.values.valueToShow!==''){\n      enteredValue = enteredValue.replace(/[-]/g, '');\n    }\n\n    this.updateState(this.updateElementValue(event.target, enteredValue, this.props.numberFormat, this.props.asString));\n  };\n\n  handleInput = (event) => {\n    if(this.values.valueToShow===event.target.value) return;\n    if(this.props.disabled || this.props.readOnly) return;\n\n    const enteredValue = this.stripAnyThingButNumber(event.target.value);\n\n    const firstHyphenIndex = enteredValue.indexOf('-');\n    const secondHyphenIndex = enteredValue.indexOf('-', firstHyphenIndex + 1);\n    if(secondHyphenIndex >= 0 || firstHyphenIndex > 0){\n      this.updateState(this.negate());\n    }else{\n      const selectionStart = event.target.selectionStart;\n      const selectionEnd = event.target.selectionEnd;\n      const newState = this.updateValue('', selectionStart, selectionEnd, enteredValue, this.props.numberFormat, this.props.asString);\n      this.updateState(newState, true);\n    }\n  };\n\n  mapValue = (value, numberFormat) => {\n    if(numberFormat===NUMBER_FORMAT_FARSI){\n      return mapToFarsi(value);\n    }else if(numberFormat===NUMBER_FORMAT_LATIN){\n      return mapToLatin(value);\n    }\n    return mapToFarsi(value);\n  };\n\n  mapDecimalSeparator = (value) => {\n    return value.replace(this.decimalSeparatorRegex, this.decimalSeparator);\n  };\n\n\n  updateState = (newState, forceFireChange) => {\n    if(!newState) return;\n\n    this.values = newState;\n    let fireOnChangeInTheEnd = false;\n    if(this.inputRef.current.value !== this.values.valueToShow){\n      fireOnChangeInTheEnd = true;\n      this.inputRef.current.value = this.values.valueToShow;\n    }\n    if(this.inputRef.current===document.activeElement){\n      // console.log('has focus :D');\n      this.inputRef.current.setSelectionRange(this.values.selectionStart, this.values.selectionEnd);\n    }else{\n      // console.log('has not focus :(');\n    }\n    if(fireOnChangeInTheEnd || forceFireChange){\n      this.fireOnChange();\n    }\n  };\n\n  negate = () => {\n    let {value,\n    valueToShow,\n    valueIsValid,\n    selectionStart,\n    selectionEnd} = this.values;\n\n    if(value > 0) {\n      value = -value;\n      valueToShow = '-'+valueToShow;\n      selectionStart++;\n      selectionEnd++;\n    }else if(value < 0) {\n      value = -value;\n      valueToShow = valueToShow.substring(1);\n      selectionStart--;\n      selectionEnd--;\n    }else{\n      return;\n    }\n\n    return {\n      value,\n      valueToShow,\n      valueIsValid,\n      selectionStart,\n      selectionEnd,\n    };\n  };\n\n  updateElementValue = (element, enteredValue, numberFormat, asString) => {\n    let currentValue = element.value;\n    let selectionStart = element.selectionStart;\n    let selectionEnd = element.selectionEnd;\n    return this.updateValue(currentValue, selectionStart, selectionEnd, enteredValue, numberFormat, asString);\n  }\n\n  updateValue = (currentValue, selectionStart, selectionEnd, enteredValue, numberFormat, asString) => {\n    const enteredValueMapped = this.mapDecimalSeparator(this.mapValue(enteredValue, numberFormat));\n    let valueToShow = currentValue;\n    if(enteredValueMapped===this.decimalSeparator){\n      const i = valueToShow.indexOf(this.decimalSeparator);\n      if(i>-1){\n        return;\n      }\n    }\n\n    let valueBeforeCursor = valueToShow.substring(0, selectionStart);\n    let valueAfterCursor = valueToShow.substring(selectionEnd);\n\n    selectionStart -= this.countThousandSeparator(valueBeforeCursor);\n    valueBeforeCursor = this.stripThousandSeparator(valueBeforeCursor);\n    valueAfterCursor = this.stripThousandSeparator(valueAfterCursor);\n\n    valueToShow = valueBeforeCursor + enteredValueMapped + valueAfterCursor;\n    selectionStart += enteredValueMapped.length;\n\n    if(typeof this.props.maxDecimal === 'number'){\n      const i = valueToShow.indexOf(this.decimalSeparator);\n      if(i>-1){\n        const decimalLength = valueToShow.length - i - 1;\n        if(decimalLength > this.props.maxDecimal){\n          valueToShow = valueToShow.substring(0, i + 1 + this.props.maxDecimal);\n          if(selectionStart>valueToShow.length) selectionStart = valueToShow.length;\n        }\n      }\n    }\n    {\n      const latinNumber = mapToLatin(valueToShow);\n      const i = this.firstNonZeroDigit(latinNumber, 0);\n      if(i > 0 && valueToShow.length>1){\n        valueToShow = valueToShow.substring(i);\n        selectionStart -= i;\n      }\n    }\n    if(typeof this.props.maxDigits === 'number'){\n      const i = valueToShow.indexOf(this.decimalSeparator);\n      const digitsLength = i>-1 ? i : valueToShow.length;\n      if(digitsLength > this.props.maxDigits){\n        if(i===-1){\n          valueToShow = valueToShow.substring(0, this.props.maxDigits);\n          if(selectionStart>valueToShow.length) selectionStart = valueToShow.length;\n        }else{\n          valueToShow = valueToShow.substring(0, this.props.maxDigits) + (i===-1 ? '' : valueToShow.substring(i));\n          if(selectionStart>this.props.maxDigits) selectionStart = this.props.maxDigits;\n        }\n      }\n    }\n\n    const separated = this.addThousandSeparator(valueToShow, selectionStart);\n    valueToShow = separated.valueToShowWithSeparator;\n    selectionStart = separated.selectionStart;\n    selectionEnd = selectionStart;\n\n    let value = this.stripThousandSeparator(mapToLatin(valueToShow));\n    let valueIsValid;\n    if(asString) {\n      const checkValue = Number(value);\n      valueIsValid = (typeof checkValue === 'number' || checkValue === undefined || checkValue === null);\n    }else{\n      value = Number(value);\n      valueIsValid = (typeof value === 'number' || value === undefined || value === null);\n    }\n\n    return {\n      value,\n      valueToShow,\n      valueIsValid,\n      selectionStart,\n      selectionEnd,\n    };\n  };\n\n  deleteValue = (element, qty, asString) => {\n    let valueToShow = element.value;\n    let selectionStart = element.selectionStart;\n    let selectionEnd = element.selectionEnd;\n\n    // console.log({selectionStart, selectionEnd})\n\n    if(selectionStart===selectionEnd){\n      if(qty < 0) {\n        if(selectionStart===0) return;\n        let valueBeforeCursor = valueToShow.substring(0, selectionStart + qty);\n        let valueAfterCursor = valueToShow.substring(selectionEnd);\n    \n        selectionStart -= this.countThousandSeparator(valueBeforeCursor);\n        valueBeforeCursor = this.stripThousandSeparator(valueBeforeCursor);\n        valueAfterCursor = this.stripThousandSeparator(valueAfterCursor);\n    \n        valueToShow = valueBeforeCursor + valueAfterCursor;\n        selectionStart += qty;\n      }else{\n        if(selectionEnd===valueToShow.length) return;\n        let valueBeforeCursor = valueToShow.substring(0, selectionStart);\n        let valueAfterCursor = valueToShow.substring(selectionEnd+qty);\n    \n        selectionStart -= this.countThousandSeparator(valueBeforeCursor);\n        valueBeforeCursor = this.stripThousandSeparator(valueBeforeCursor);\n        valueAfterCursor = this.stripThousandSeparator(valueAfterCursor);\n    \n        valueToShow = valueBeforeCursor + valueAfterCursor;\n      }\n    }else{\n      let valueBeforeCursor = valueToShow.substring(0, selectionStart);\n      let valueAfterCursor = valueToShow.substring(selectionEnd);\n  \n      selectionStart -= this.countThousandSeparator(valueBeforeCursor);\n      valueBeforeCursor = this.stripThousandSeparator(valueBeforeCursor);\n      valueAfterCursor = this.stripThousandSeparator(valueAfterCursor);\n  \n      valueToShow = valueBeforeCursor + valueAfterCursor;\n    }\n\n    const separated = this.addThousandSeparator(valueToShow, selectionStart);\n    valueToShow = separated.valueToShowWithSeparator;\n    selectionStart = separated.selectionStart;\n    selectionEnd = selectionStart;\n\n    let value = this.stripThousandSeparator(mapToLatin(valueToShow));\n    let valueIsValid;\n    if(asString) {\n      const checkValue = Number(value);\n      valueIsValid = (typeof checkValue === 'number' || checkValue === undefined || checkValue === null);\n    }else{\n      value = Number(value);\n      valueIsValid = (typeof value === 'number' || value === undefined || value === null);\n    }\n\n\n    return {\n      value,\n      valueToShow,\n      valueIsValid,\n      selectionStart,\n      selectionEnd,\n    };\n  };\n\n\n  addThousandSeparator = (valueToShow, selectionStart) => {\n    let valueToShowWithSeparator = '';\n    let alreadFoundDecimalSeparator = false;\n    let alreadyPassedDecimalSeparator = valueToShow.indexOf(this.decimalSeparator) === -1;\n    let groupCount = 0;\n    for (let i = valueToShow.length-1; i>=0; i--){\n      const c = valueToShow.charAt(i);\n      if(c===this.decimalSeparator){\n        if(!alreadFoundDecimalSeparator){\n          alreadFoundDecimalSeparator = true;\n          valueToShowWithSeparator = c + valueToShowWithSeparator;\n          alreadyPassedDecimalSeparator = true;\n          groupCount = 0;\n        }else{\n          if(i <= selectionStart){\n            selectionStart--;\n          }\n        }\n      }else{\n        if(alreadyPassedDecimalSeparator && groupCount===3 && c!=='-'){\n          valueToShowWithSeparator = this.thousandSeparator + valueToShowWithSeparator;\n          groupCount = 0;\n          if(i<selectionStart-1){\n            selectionStart++;\n          }\n        }\n        valueToShowWithSeparator = c + valueToShowWithSeparator;\n        groupCount++;\n      }\n    }\n    return {valueToShowWithSeparator, selectionStart};\n  };\n\n  firstNonZeroDigit = (value, i) => {\n    if(value.charAt(i)==='0') return this.firstNonZeroDigit(value, i+1);\n    return i;\n  };\n\n  countThousandSeparator = (value) => {\n    return (value.match(this.thousandSeparatorRegex) || []).length;\n  };\n\n  stripThousandSeparator = (value) => {\n    return value.replace(this.thousandSeparatorRegex, '');\n  };\n\n  stripAnyThingButNumber = (str) => {\n    if(!str) return str;\n    return str.toString().replace(this.numberRegex, '');\n  };\n  \n  fireOnChange = () => {\n    if(this.props.onChange){\n      this.props.onChange({target: {name: this.props.name, value: this.values.value}});\n    }\n  };\n\n  shouldComponentUpdate(nextProps, nextState){\n    if(nextProps.value !== this.values.value || nextProps.numberFormat !== this.props.numberFormat){\n      this.updateState(this.readValuesFromProps(nextProps));\n    }\n    if(!shallowEqualObjects(nextProps.style, this.props.style)){\n      return true;\n    }\n    if(nextProps.className !== this.props.className){\n      this.inputRef.current.className = nextProps.className;\n    }\n    if(nextProps.disabled !== this.props.disabled){\n      this.inputRef.current.disabled = nextProps.disabled;\n    }\n    if(nextProps.readOnly !== this.props.readOnly){\n      this.inputRef.current.readOnly = nextProps.readOnly;\n    }\n    return false;\n  }\n\n  render() {\n    const {value, onChange, onInput, onPast, onKeyDown, pattern, inputMode, type, ref, inputRef, getInputRef, numberFormat, defaultValue, asString, maxDecimal, maxDigits, ...rest} = this.props;\n    const {valueToShow} = this.values;\n\n    // const localInputMode = this.props.type === 'tel' ? 'tel' : 'numeric'; // as we use type=tel, then we do not need it any more\n    // const localPattern = '[0-9]*'; // it has problem with the form checking, as we insert persian digit, it is not acceptable for the browser\n\n    return (\n      <input\n        ref={this.inputRef}\n        type={\"tel\"} // I tried to use text and using inputMode, but it does not work on Safari\n        // inputMode={localInputMode}\n        // xInputMode={localnputMode} // in firefox OS it is x-inputmode, I do not know how to handle it\n        dir={\"ltr\"}\n        // pattern={localPattern}\n        defaultValue={valueToShow}\n        onKeyDown={this.handleKeyDown}\n        onPaste={this.handlePaste}\n        onInput={this.handleInput}\n        {...rest}\n      />\n      );\n    //<p ref={this.rr} type={\"text\"}>empty</p></div>\n\n  }\n}\nexport default DecimalInput;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport shallowEqualObjects from 'shallow-equal/objects';\nimport { mapToFarsi, mapToLatin, hasStringACharToGoToNext, repeatStr, NUMBER_FORMAT_FARSI, NUMBER_FORMAT_LATIN} from './util';\n\nconst CARD_SEPERATOR =  '-';\nconst SEPERATORES_REGEX = new RegExp(`[ ${CARD_SEPERATOR}]`, 'g');\nconst MATCH_REGEX = new RegExp(`[0-9]{4}[${CARD_SEPERATOR}][0-9]{4}[${CARD_SEPERATOR}][0-9]{4}[${CARD_SEPERATOR}][0-9]{4}`);\nconst EMPTY_VALUE = `    ${CARD_SEPERATOR}    ${CARD_SEPERATOR}    ${CARD_SEPERATOR}    `;\n\n\nclass CardNumberInput extends Component {\n\n  static propTypes = {\n    /**\n     * The ref to pass on the input, if empty it will be created internally\n     */\n    inputRef: PropTypes.any,\n    getInputRef: PropTypes.any,\n    /**\n     * The name that will be set while firing the onChange event in the target object\n     */\n    name: PropTypes.string,\n    /**\n     * Callback function that is fired when the cart number value changes.\n     */\n    onChange: PropTypes.func,\n    /**\n     * Override the inline-styles of the root element.\n     */\n    style: PropTypes.object,\n    /**\n     * The css class name of the root element.\n     */\n    className: PropTypes.string,\n    /**\n     * Disables the card number.\n     */\n    disabled: PropTypes.bool,\n    /**\n     * makes the card number readonly.\n     */\n    readOnly: PropTypes.bool,\n    /**\n     * Callback function that is fired when a click event occurs on the input.\n     */\n    onClick: PropTypes.func,\n    /**\n     * Callback function that is fired when the input gains focus.\n     */\n    onFocus: PropTypes.func,\n    /**\n     * Sets the value for the card number input.\n     */\n    value: PropTypes.string,\n  };\n\n  constructor(props) {\n    super(props);\n    this.emptyValue = this.emptyValue.bind(this);\n\n    let ref = props.inputRef || props.getInputRef;\n    if(ref && typeof ref === 'function'){\n      ref = ref();\n    }\n    this.inputRef = ref ? ref : React.createRef();\n    // this.rr = React.createRef();\n\n    this.values = this.readValues(props.value);\n    this.previousValue = this.values.value;\n  }\n\n\n  /**\n   * @param {string} value\n   */\n  readCardNumberFromValue = (value) => {\n    if(!value) return;\n\n    const latinNumberValue = mapToLatin(value);\n    const regEx = /[0-9]{4}[^0-9]*[0-9]{4}[^0-9]*[0-9]{4}[^0-9]*[0-9]{4}/;\n    const match = latinNumberValue.match(regEx);\n    if(match){\n      const valueWithNoSeperator = match[0].replace(/[^0-9]*/g, '');\n      return `${valueWithNoSeperator.substring(0, 4)}${CARD_SEPERATOR}${valueWithNoSeperator.substring(4, 8)}${CARD_SEPERATOR}${valueWithNoSeperator.substring(8, 12)}${CARD_SEPERATOR}${valueWithNoSeperator.substring(12, 16)}`;\n    }\n\n    const regEx4Digits = /[0-9]{4}/;\n    const match4Digit = latinNumberValue.match(regEx4Digits);\n    if(match4Digit){\n      this.updateState(this.updateValue(this.inputRef.current, match4Digit[0], this.props.numberFormat));\n      return;\n    }\n\n  }\n    \n  readValues = (value) => {\n    const valueToShow = this.mapValue(value, this.props.numberFormat);\n    const valueIsValid = this.isValueValidCardNumber(value);\n\n    return {\n      value,\n      valueToShow,\n      valueIsValid,\n      selectionStart: undefined,\n      selectionEnd: undefined,\n    };\n  };\n\n  emptyValue() {\n    this.updateState(this.resetValues());\n  };\n\n  handleFocus = (event) => {\n    if(this.isValueEmpty(this.values.value)){\n      this.jumpTo(1);\n    }\n    if(this.props.onFocus){\n      this.props.onFocus(event);\n    }\n  };\n\n  handleBlur = (event) => {\n    if(this.props.onBlur){\n      this.props.onBlur(event);\n    }\n  };\n\n  jumpToNext = () => {\n    const selectionStart = this.inputRef.current.selectionStart;\n    const whereTheCaretIs = this.whereIsCaret(selectionStart);\n\n    if(whereTheCaretIs < 4){\n      this.jumpTo(whereTheCaretIs + 1);\n      return true;\n    }\n    return false;\n  };\n\n  jumpToPrevious = () => {\n    const selectionStart = this.inputRef.current.selectionStart;\n    const whereTheCaretIs = this.whereIsCaret(selectionStart);\n\n    if(whereTheCaretIs > 1){\n      this.jumpTo(whereTheCaretIs - 1);\n      return true;\n    }\n    return false;\n  };\n\n  isValueEmpty = (value) => {\n    if(value.replace(SEPERATORES_REGEX, '')==='') return true;\n    return false;\n  }; \n\n  /**\n   * @param {number} section\n   *  */\n  jumpTo = (section) => {\n    const caretPosition = (section - 1) * 5;\n    this.values.selectionStart = caretPosition;\n    this.values.selectionEnd = caretPosition;\n    this.inputRef.current.setSelectionRange(this.values.selectionStart, this.values.selectionEnd);\n  };\n\n  handleKeyDown = (event) => {\n    // console.log('keyCode: ', event.keyCode, 'key: ', event.key);\n    if(this.props.disabled || this.props.readOnly) {\n      event.preventDefault();\n    }else if(event.keyCode===8) { //backspace\n      event.preventDefault();\n      this.updateState(this.deleteValue(event.target, -1));\n    }else if(event.keyCode===46){ //delete\n      event.preventDefault();\n      this.updateState(this.deleteValue(event.target, 1));\n    }else if(event.keyCode>=48 && event.keyCode<=57){ //digits\n      event.preventDefault();\n      // console.log('digit');\n      this.updateState(this.updateValue(event.target, (event.keyCode - 48).toString(), this.props.numberFormat));\n    }else if(event.keyCode>=96 && event.keyCode<=105){ //digits\n      event.preventDefault();\n      // console.log('digit');\n      this.updateState(this.updateValue(event.target, (event.keyCode - 96).toString(), this.props.numberFormat));\n    }else if(event.key>='۰' && event.key<='۹'){ //digits\n      event.preventDefault();\n      // console.log('digit');\n      this.updateState(this.updateValue(event.target, event.key, this.props.numberFormat));\n    }else if(event.key==='.' || event.key==='/' || event.key==='-' || event.key==='*' || event.key==='#' \n             || \n             event.keyCode===188 || event.keyCode===189 || event.keyCode===190 || event.keyCode===191 \n             ){\n      event.preventDefault();\n      if(event.ctrlKey || event.shiftKey || event.metaKey || event.key==='#'){\n        this.jumpToPrevious();\n      }else{\n        this.jumpToNext();\n      }\n    }else if(event.keyCode>=36 && event.keyCode<=40){ //arrows\n    }else if(event.keyCode===9){ //tab\n      if(Math.abs(this.inputRef.current.selectionStart - this.inputRef.current.selectionEnd)===this.inputRef.current.value.length){\n        return;\n      }\n      if(event.ctrlKey || event.shiftKey || event.metaKey){\n        if(this.jumpToPrevious()) event.preventDefault();\n      }else{\n        if(this.jumpToNext()) event.preventDefault();\n      }\n    }else if(event.keyCode===13){ //return\n      this.hideKeyboard();\n    }else if((event.ctrlKey || event.metaKey) && (event.keyCode===67 || event.keyCode===86)){ //copy/paste\n    }else if((event.ctrlKey || event.metaKey) && (event.keyCode===82)){ //refresh key\n    }else if((event.ctrlKey || event.metaKey) && (event.keyCode===73)){ //inspector\n    }else if((event.ctrlKey || event.metaKey) && (event.keyCode===65)){ //select all\n    }else if(event.keyCode===115){ // F4\n      if(this.props.onShowDialog) {\n        event.preventDefault();\n        this.props.onShowDialog();\n      }\n    }else if(event.keyCode>=112 && event.keyCode<=123){ // All other F keys\n    }else if(event.keyCode===229){ //android bug workaround\n      //K1 : I guess that we have to save the caret position as the input will change it, we need it to know where we have to jump to in handleInput function\n      this.values.selectionStart = this.inputRef.current.selectionStart;\n      this.values.selectionEnd = this.inputRef.current.selectionEnd;\n      //  this.rr.current.innerText = `setting ss to ${this.values.selectionStart}  ${this.values.selectionEnd}`;\n\n    }else{\n      // console.log('other');\n      // console.log('keyCode: ', event.keyCode, 'key: ', event.key, 'ctrlKey: ', event.ctrlKey);\n      //  this.rr.current.innerText = `keyCode: ${event.keyCode} key:  ${event.key} ctrlKey: ${event.ctrlKey}`;\n      event.preventDefault();\n    }\n  };\n\n  hideKeyboard = () => {\n    this.inputRef.current.blur();\n  }\n\n  handlePaste = (event) => {\n    event.preventDefault();\n    if(this.props.disabled || this.props.readOnly) return;\n\n    const valueFromClipboard = this.readCardNumberFromValue((event.clipboardData || window.clipboardData).getData('text'));\n    if(!valueFromClipboard) return;\n\n    const values = this.readValues(valueFromClipboard);\n\n    if(values.valueIsValid){\n      this.updateState(values);\n    }\n  };\n\n  handleInput = (event) => {\n    event.preventDefault();\n    if(this.props.disabled || this.props.readOnly) return;\n    if(this.values.valueToShow===event.target.value) return;\n    const inputValue = event.target.value;\n    // const enteredValue = stripAnyThingButDigits(event.target.value);\n    // this.rr.current.innerText = `V : ${inputValue}`;\n    \n    if(this.inputRef.current.value !== this.values.valueToShow){\n      this.inputRef.current.value = this.values.valueToShow;\n      this.inputRef.current.setSelectionRange(this.values.selectionStart, this.values.selectionEnd);\n    }\n\n    if(hasStringACharToGoToNext(inputValue)){\n      this.jumpToNext();\n    }\n\n    // this.updateState(this.rollbackValue());\n  };\n\n  /**\n   * @param {string} value\n   */\n  mapValue = (value, numberFormat) => {\n    if(numberFormat===NUMBER_FORMAT_FARSI){\n      const mapped = mapToFarsi(value);\n      return mapped;\n    }else if(numberFormat===NUMBER_FORMAT_LATIN){\n      const mapped = mapToLatin(value);\n      return mapped;\n    }\n    const mapped = mapToFarsi(value);\n    return mapped;\n  };\n\n\n  updateState = (newState) => {\n    if(!newState) return;\n\n    this.values = newState;\n\n    if(this.values.valueIsValid===undefined){\n      this.values.valueIsValid = this.isValueValidCardNumber(this.values.value);\n    }\n\n    let fireOnChangeInTheEnd = false;\n    //console.log('values on updateState', this.values)\n    if(this.inputRef.current.value !== this.values.valueToShow){\n      fireOnChangeInTheEnd = true;\n      this.inputRef.current.value = this.values.valueToShow;\n    }\n    if(this.inputRef.current===document.activeElement){\n      // console.log('has focus :D');\n      this.inputRef.current.setSelectionRange(this.values.selectionStart, this.values.selectionEnd);\n    }else{\n      // console.log('has not focus :(');\n    }\n    if(fireOnChangeInTheEnd){\n      this.fireOnChange();\n    }\n  };\n\n  updateValue = (element, enteredValue, numberFormat) => {\n    const enteredValueMapped = this.mapValue(enteredValue, numberFormat);\n    let valueToShow = element.value;\n    if(valueToShow===''){\n      valueToShow = EMPTY_VALUE;\n    }\n    let selectionStart = element.selectionStart;\n    let selectionEnd = element.selectionEnd;\n\n    valueToShow = valueToShow.substring(0, selectionStart) + enteredValueMapped + valueToShow.substring(selectionEnd);\n    selectionStart += enteredValueMapped.length;\n\n    const seperatorBefore = valueToShow.lastIndexOf(CARD_SEPERATOR, selectionStart - 1) + 1;\n    let seperatorAfter = valueToShow.indexOf(CARD_SEPERATOR, selectionStart);\n    if(seperatorAfter===-1) seperatorAfter = valueToShow.length;\n    if(seperatorAfter - seperatorBefore > 4) {\n      if(selectionStart - seperatorBefore >= 4){\n        valueToShow = valueToShow.substring(0, seperatorBefore) + valueToShow.substring(selectionStart - 4, selectionStart) + valueToShow.substring(seperatorAfter);\n        selectionStart = seperatorBefore + 4;\n      }else{\n        valueToShow = valueToShow.substring(0, seperatorBefore + 4) + valueToShow.substring(seperatorAfter);\n      }\n    }\n\n\n\n    const value = mapToLatin(valueToShow);\n    const valueIsValid = this.isValueValidCardNumber(value);\n\n    if(selectionStart < valueToShow.length && value.substring(selectionStart - 4, selectionStart).match(/[0-9]{4}/)){\n      selectionStart++;\n    }\n    selectionEnd = selectionStart;\n\n    const values = {\n      value,\n      valueToShow,\n      valueIsValid,\n      selectionStart,\n      selectionEnd,\n    };\n\n    return values; \n  };\n\n  /**\n   * @param {number} selectionStart\n   */\n  whereIsCaret = (selectionStart) => {\n    return Math.floor(selectionStart / 5) + 1;\n  };\n\n  /**\n   * @param {string} value\n   */\n  isValueValidCardNumber = (value) => {\n    if(!value) return false;\n    if(value.match(MATCH_REGEX)) return true;\n    return false;\n  };\n\n  resetValues = () => {\n    const value = '';\n    return {\n      value,\n      valueToShow: this.mapValue(value, this.props.numberFormat),\n      valueIsValid: false,\n      selectionStart: 0,\n      selectionEnd: 0,\n    };\n  };\n\n  deleteValue = (element, qty) => {\n    let valueToShow = element.value;\n    let selectionStart = element.selectionStart;\n    let selectionEnd = element.selectionEnd;\n\n    if(selectionStart===selectionEnd){\n      if(qty < 0) {\n        if(selectionStart===0) return;\n        if(valueToShow.substring(selectionStart + qty, selectionStart)===CARD_SEPERATOR) {\n          const newValues = {...this.values};\n          newValues.selectionStart--;\n          newValues.selectionEnd--;\n          return newValues;\n        }\n        valueToShow = valueToShow.substring(0, selectionStart + qty) + valueToShow.substring(selectionEnd);\n        selectionStart += qty;\n      }else{\n        if(selectionEnd===valueToShow.length) return;\n        if(valueToShow.substring(selectionStart, selectionStart + qty)===CARD_SEPERATOR) return;\n        valueToShow = valueToShow.substring(0, selectionStart) + valueToShow.substring(selectionEnd+qty);\n      }\n      const nextSeperator = valueToShow.indexOf(CARD_SEPERATOR, selectionStart);\n      if(nextSeperator===-1){\n        valueToShow = valueToShow + ' ';\n      }else{\n        valueToShow = valueToShow.substring(0, nextSeperator) +repeatStr(' ', Math.abs(qty))+ valueToShow.substring(nextSeperator);\n      }\n    }else{\n      if(valueToShow.substring(selectionStart, selectionEnd).indexOf(CARD_SEPERATOR)>=0){\n        valueToShow = '';\n        selectionStart = 0;\n      }else {\n        valueToShow = valueToShow.substring(0, selectionStart) +repeatStr(' ', selectionEnd-selectionStart)+ valueToShow.substring(selectionEnd);\n      }\n    }\n\n    selectionEnd = selectionStart;\n\n    const value = mapToLatin(valueToShow);\n    const valueIsValid = this.isValueValidCardNumber(value);\n\n    const values = {\n      value,\n      valueToShow,\n      valueIsValid,\n      selectionStart,\n      selectionEnd,\n    };\n\n    return values; \n  };\n\n  fireOnChange = () => {\n    if(this.props.onChange){\n      const value = this.values.value;\n      if(this.previousValue !== value){\n        this.previousValue = value;\n        const target = {\n          name: this.props.name,\n          value: this.values.value,\n          valueIsValid: this.values.valueIsValid,\n        };\n        this.props.onChange({target});\n      }\n    }\n  };\n\n  shouldComponentUpdate(nextProps, nextState){\n    if(nextProps.value !== this.values.value || nextProps.numberFormat !== this.props.numberFormat){\n      this.updateState(this.readValues(nextProps.value));\n    }\n    if(!shallowEqualObjects(nextProps.style, this.props.style)){\n      return true;\n    }\n    if(nextProps.className !== this.props.className){\n      this.inputRef.current.className = nextProps.className;\n    }\n    if(nextProps.disabled !== this.props.disabled){\n      this.inputRef.current.disabled = nextProps.disabled;\n    }\n    if(nextProps.readOnly !== this.props.readOnly){\n      this.inputRef.current.readOnly = nextProps.readOnly;\n    }\n    return false;\n  }\n\n  render() {\n    const {value, onChange, onFocus, onBlur, onInput, onPast, onKeyDown, onShowDialog, pattern, inputMode, type, inputRef, getInputRef, numberFormat, defaultValue, ...rest} = this.props;\n    const {valueToShow} = this.values;\n\n    // const localInputMode = this.props.type === 'tel' ? 'tel' : 'numeric'; // as we use type=tel, then we do not need it any more\n    // const localPattern = '[0-9]*'; // it has problem with the form checking, as we insert persian digit, it is not acceptable for the browser\n\n    return (\n      <input\n        ref={this.inputRef}\n        type={\"tel\"} // I tried to use text and using inputMode, but it does not work on Safari\n        // inputMode={localInputMode}\n        // xInputMode={localnputMode} // in firefox OS it is x-inputmode, I do not know how to handle it\n        dir={\"ltr\"}\n        // pattern={localPattern}\n        defaultValue={valueToShow}\n        onKeyDown={this.handleKeyDown}\n        onPaste={this.handlePaste}\n        onInput={this.handleInput}\n        onFocus={this.handleFocus}\n        onBlur={this.handleBlur}\n        {...rest}\n      />\n      );\n    //<p ref={this.rr} type={\"text\"}>empty</p></div>\n\n  }\n}\n\n\nexport default CardNumberInput;","import React, { Component } from 'react';\nimport { NumberInput, DecimalInput, CardNumberInput, NUMBER_FORMAT_FARSI } from \"./lib\";\nimport {NUMBER_FORMAT_LATIN} from './lib';\nimport './Example.css';\n\nclass Example extends Component {\n  state = {\n    Number1: '',\n    Number2: '123',\n    Number3: 0,\n    color: false,\n    bgColor: false,\n    disabled: false,\n    readOnly: false,\n    Tel1: '0912',\n    value1: '',\n  };\n\n  componentDidMount(){\n    // this.interval = setInterval(this.toggleBgColor, 6000);\n    // this.interval = setInterval(this.toggleColor, 3000);\n  }\n\n  componentWillUnmount(){\n    clearInterval(this.interval);\n  }\n\n  handleChange = (event) => {\n    const newState = {};\n    const t = event.target;\n\n    newState[t.name] = t.value;\n    this.setState(newState, ()=>{\n      console.log('state', this.state)\n    });\n  };\n\n  handleValueChange = (event) => {\n    const newState = {};\n    const t = event.target;\n\n    newState[t.name.substr(0, 7)] = t.value;\n    this.setState(newState, ()=>{\n      console.log('state', this.state)\n    });\n  };\n\n  toggleColor = () => {\n    this.setState({\n      color: !this.state.color,\n    })\n  };\n\n  toggleBgColor = () => {\n    this.setState({\n      bgColor: !this.state.bgColor,\n    })\n  };\n\n  toggleDisabled = () => {\n    this.setState({\n      disabled: !this.state.disabled,\n    })\n  };\n\n  toggleReadOnly = () => {\n    this.setState({\n      readOnly: !this.state.readOnly,\n    })\n  };\n\n  render(){\n    const className = this.state.color ? \"red\" : \"\";\n    const style = this.state.bgColor ? {backgroundColor: 'aqua'} : {};\n    const {disabled, readOnly} = this.state;\n\n\n    return (\n      <React.Fragment>\n        <form autoComplete=\"on\">\n        <div>\n          <br/>\n          <br/>\n          <label>خروجی عدد لاتین\n            <br/>\n            <input type=\"text\" name=\"Number1_value\" style={{width: 250}} value={this.state.Number1} onChange={this.handleValueChange}  placeholder=\"از اینجا کلید تب را چند بار بزنید\" />\n          </label>\n          <br/>\n          <br/>\n          <label>\n            نمونه فارسی\n            <br/>\n            <NumberInput name=\"Number1\" disabled={disabled} readOnly={readOnly} className={className} style={style} value={this.state.Number1} onChange={this.handleChange} placeholder=\"type/paste a number\" />\n          </label>\n        </div>\n        <br/>\n        <div>\n          <label>\n            نمونه لاتین\n            <br/>\n            <NumberInput name=\"Number2\" disabled={disabled} readOnly={readOnly} className={className} style={style} value={this.state.Number2} numberFormat={NUMBER_FORMAT_LATIN} onChange={this.handleChange} placeholder=\"type/paste a number\" />\n          </label>\n        </div>\n        <label>خروجی\n          <br/>\n          <input type=\"text\" name=\"Number2_value\" style={{width: 250}} value={this.state.Number2} onChange={this.handleValueChange} placeholder=\"این فیلد خروجی است\" />\n        </label>\n        <br/>\n        <br/>\n        <br/>\n        <div>\n          <label>\n            عدد اعشاری\n            <br/>\n            <DecimalInput name=\"Number3\" disabled={disabled} readOnly={readOnly} className={className} style={style} value={this.state.Number3} asString={false} maxDigits={5} maxDecimal={2} numberFormat={NUMBER_FORMAT_FARSI} onChange={this.handleChange} placeholder=\"type/paste a number\" />\n          </label>\n        </div>\n        <label>خروجی\n          <br/>\n          <input type=\"text\" name=\"Number3_value\" style={{width: 250}} value={this.state.Number3} onChange={this.handleValueChange} placeholder=\"این فیلد خروجی است\" />\n        </label>\n        <br/>\n        <br/>\n        <div>\n          <label>\n            نمونه تلفن فارسی\n            <br/>\n            <NumberInput type=\"tel\" name=\"Tel1\" disabled={disabled} readOnly={readOnly} className={className} style={style} value={this.state.Tel1} onChange={this.handleChange} maxLength={12} placeholder=\"type/paste a number\" />\n          </label>\n        </div>\n        <br/>\n        <label>ورودی شماره کارت\n            <br/>\n            <CardNumberInput\n              value={this.state.value1}\n              disabled={disabled}\n              readOnly={readOnly}\n              name={'value1'}\n              className={className} \n              style={style} \n              onChange={this.handleChange}\n              placeholder=\"شماره کارت\" />\n            <br/>\n            خروجی\n            <br/>\n            <input type=\"text\" name=\"value1\" dir={'ltr'} value={this.state.value1} onChange={this.handleChange}/>\n          </label>\n          <br/>\n        <br/>\n        <button type=\"button\" onClick={this.toggleColor}>toggle className</button>\n        <button type=\"button\" onClick={this.toggleBgColor}>toggle style</button>\n        <button type=\"button\" onClick={this.toggleDisabled}>{disabled?'enable':'disable'}</button>\n        <button type=\"button\" onClick={this.toggleReadOnly}>{readOnly?'writable':'read only'}</button>\n        <input type=\"submit\"/>\n        </form>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default Example;\n","import React from 'react';\nimport { render } from \"react-dom\";\nimport Example from './Example';\n\nconst App = () => (\n  <div dir={\"rtl\"} style={{ width: 640, margin: \"15px auto\" }}>\n    <h1>کمپننت عدد</h1>\n    <br/>ورژن ۱،۰ ساخت ۳\n    <ul>\n      <li>نمایش عدد فارسی یا لاتین</li>\n      <li>ذخیره عدد لاتین، باعث میشود که داده صحیح به سرور داده شود</li>\n      <li>نمایش غیر عدد در صورتی که داده از بیرون به آن وارد شود.</li>\n      <li>نمایش کیبورد عددی در مبایل (غیر از مرورگر سامسونگ) </li>\n    </ul>\n\n    <Example/>\n\n  </div>\n);\n\nrender(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}