{"version":3,"sources":["lib/util.js","lib/NumberInput.js","lib/DecimalInput.js","lib/CardNumberInput.js","Example.js","index.js"],"names":["mapToFarsi","str","toString","replace","e","c","charCodeAt","String","fromCharCode","mapToLatin","stripAnyThingButDigits","repeatStr","n","r","i","NumberInput","props","readValuesFromProps","value","valueToShow","mapValue","numberFormat","selectionStart","undefined","selectionEnd","handleKeyDown","event","disabled","readOnly","preventDefault","keyCode","updateState","deleteValue","target","updateValue","key","hideKeyboard","ctrlKey","metaKey","inputRef","current","blur","handlePaste","enteredValue","clipboardData","window","getData","handleInput","values","recheckValue","newState","forceFireChange","noFireOnChange","fireOnChangeInTheEnd","document","activeElement","setSelectionRange","fireOnChange","element","enteredValueMapped","maxLength","length","substring","qty","onChange","name","ref","getInputRef","React","createRef","nextProps","nextState","this","shallowEqualObjects","style","className","rest","onInput","onPast","onKeyDown","pattern","inputMode","type","defaultValue","dir","onPaste","Component","DecimalInput","defaultThousandSeparator","defaultDecimalSeparator","asString","updateElementValue","decimalSeparator","maxDecimal","negate","stripAnyThingButNumber","firstHyphenIndex","indexOf","mapDecimalSeparator","decimalSeparatorRegex","valueIsValid","currentValue","valueBeforeCursor","valueAfterCursor","countThousandSeparator","stripThousandSeparator","latinNumber","firstNonZeroDigit","charAt","maxDigits","separated","addThousandSeparator","valueToShowWithSeparator","checkValue","Number","thousandSeparator","alreadFoundDecimalSeparator","alreadyPassedDecimalSeparator","groupCount","match","thousandSeparatorRegex","numberRegex","RegExp","SEPERATORES_REGEX","MATCH_REGEX","EMPTY_VALUE","CardNumberInput","readCardNumberFromValue","latinNumberValue","valueWithNoSeperator","match4Digit","readValues","isValueValidCardNumber","handleFocus","isValueEmpty","jumpTo","onFocus","handleBlur","onBlur","jumpToNext","whereTheCaretIs","whereIsCaret","jumpToPrevious","section","caretPosition","shiftKey","Math","abs","onShowDialog","valueFromClipboard","inputValue","seperatorBefore","lastIndexOf","seperatorAfter","floor","resetValues","newValues","nextSeperator","previousValue","emptyValue","bind","Example","state","Number1","Number2","Number3","color","bgColor","Tel1","value1","handleChange","t","setState","console","log","handleValueChange","substr","toggleColor","toggleBgColor","toggleDisabled","toggleReadOnly","clearInterval","interval","backgroundColor","Fragment","autoComplete","width","placeholder","onClick","App","margin","render","getElementById"],"mappings":"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","file":"static/js/main.670c6444.chunk.js","sourcesContent":["export const NUMBER_FORMAT_FARSI = 'FARSI';\nexport const NUMBER_FORMAT_LATIN = 'LATIN';\n\nexport function mapToFarsi(str) {\n  if(!str) return str;\n  return str.toString().replace(/[1234567890١٢٣٤٥٦٧٨٩٠]/gi, e => { const c = e.charCodeAt(0); return String.fromCharCode(c + (c < 60 ? 1728 : 144)) })\n}\n\nexport function mapToLatin(str) {\n  if(!str) return str;\n  return str.toString().replace(/[۱۲۳۴۵۶۷۸۹۰١٢٣٤٥٦٧٨٩٠]/gi, e => { const c = e.charCodeAt(0); return String.fromCharCode(c - (c < 1770 ? 1584 : 1728)) })\n}\n\nexport function stripAnyThingButDigits(str) {\n  if(!str) return str;\n  return str.toString().replace(/[^1234567890۱۲۳۴۵۶۷۸۹۰١٢٣٤٥٦٧٨٩٠]/gi, '');\n}\n\nexport function hasStringACharToGoToNext (str) {\n  if(str.indexOf('.')>=0) return true;\n  if(str.indexOf(',')>=0) return true;\n  // if(str.indexOf('/')>=0) return true;\n  if(str.indexOf('-')>=0) return true;\n  if(str.indexOf(';')>=0) return true;\n  if(str.indexOf('*')>=0) return true;\n  if(str.indexOf('#')>=0) return true;\n  if(str.indexOf(' ')>=0) return true;\n  if(str.indexOf('،')>=0) return true;\n  return false;\n}\n\n/**\n * @param {string} str\n * @param {number} n\n */\nexport function repeatStr(str, n){\n  let r = '';\n  for(let i=0; i<n; i++){\n    r += str;\n  }\n  return r;\n}\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport shallowEqualObjects from 'shallow-equal/objects';\n\nimport { mapToFarsi, mapToLatin, stripAnyThingButDigits, NUMBER_FORMAT_FARSI, NUMBER_FORMAT_LATIN} from './util';\n\nclass NumberInput extends Component {\n\n  static propTypes = {\n    /**\n     * The ref to pass on the input, if empty it will be created internally\n     */\n    inputRef: PropTypes.any,\n    getInputRef: PropTypes.any,\n    /**\n     * The name that will be set while firing the onChange event in the target object\n     */\n    name: PropTypes.string,\n    /**\n     * Callback function that is fired when the cart number value changes.\n     */\n    onChange: PropTypes.func,\n    /**\n     * Override the inline-styles of the root element.\n     */\n    style: PropTypes.object,\n    /**\n     * The css class name of the root element.\n     */\n    className: PropTypes.string,\n    /**\n     * Disables the number input.\n     */\n    disabled: PropTypes.bool,\n    /**\n     * makes the number input readonly.\n     */\n    readOnly: PropTypes.bool,\n    /**\n     * accepted number digit count.\n     */\n    maxLength: PropTypes.number,\n    /**\n     * Callback function that is fired when a click event occurs on the input.\n     */\n    onClick: PropTypes.func,\n    /**\n     * Callback function that is fired when the input gains focus.\n     */\n    onFocus: PropTypes.func,\n    /**\n     * Sets the value for the number input.\n     */\n    value: PropTypes.string,\n  };\n\n  constructor(props) {\n    super(props);\n    let ref = props.inputRef || props.getInputRef;\n    if(ref && typeof ref === 'function'){\n      ref = ref();\n    }\n    this.inputRef = ref ? ref : React.createRef();\n    // this.rr = React.createRef();\n\n    this.values = this.readValuesFromProps(props);\n  }\n\n  readValuesFromProps = (props) => {\n    const value = props.value || '';\n    const valueToShow = this.mapValue(value, props.numberFormat);\n\n    return {\n      value,\n      valueToShow,\n      selectionStart: undefined,\n      selectionEnd: undefined,\n    };\n  };\n\n  handleKeyDown = (event) => {\n    // console.log('keyCode: ', event.keyCode, 'key: ', event.key);\n    if(this.props.disabled || this.props.readOnly) {\n      event.preventDefault();\n    }else if(event.keyCode===8) { //backspace\n      event.preventDefault();\n      this.updateState(this.deleteValue(event.target, -1));\n    }else if(event.keyCode===46){ //delete\n      event.preventDefault();\n      this.updateState(this.deleteValue(event.target, 1));\n    }else if(event.keyCode>=48 && event.keyCode<=57){ //digits\n      event.preventDefault();\n      // console.log('digit');\n      this.updateState(this.updateValue(event.target, (event.keyCode - 48).toString(), this.props.numberFormat));\n    }else if(event.keyCode>=96 && event.keyCode<=105){ //digits\n      event.preventDefault();\n      // console.log('digit');\n      this.updateState(this.updateValue(event.target, (event.keyCode - 96).toString(), this.props.numberFormat));\n    }else if(event.key>='۰' && event.key<='۹'){ //digits\n      event.preventDefault();\n      // console.log('digit');\n      this.updateState(this.updateValue(event.target, event.key, this.props.numberFormat));\n    }else if(event.keyCode>=35 && event.keyCode<=40){ //arrows\n    }else if(event.keyCode===9){ //tab\n    }else if(event.keyCode===13){ //return\n      this.hideKeyboard();\n    }else if((event.ctrlKey || event.metaKey) && (event.keyCode===67 || event.keyCode===86)){ //copy/paste\n    }else if((event.ctrlKey || event.metaKey) && (event.keyCode===82)){ //refresh key\n    }else if((event.ctrlKey || event.metaKey) && (event.keyCode===82)){ //refresh key\n    }else if((event.ctrlKey || event.metaKey) && (event.keyCode===73)){ //inspector\n    }else if((event.ctrlKey || event.metaKey) && (event.keyCode===65)){ //select all\n    }else if((event.ctrlKey || event.metaKey) && (event.keyCode===76)){ //location focus\n    }else if(event.keyCode>=112 && event.keyCode<=123){ // All other F keys\n    }else if(event.keyCode===229){ //android bug workaround\n    }else{\n      // console.log('other');\n      // console.log('keyCode: ', event.keyCode, 'key: ', event.key, 'ctrlKey: ', event.ctrlKey);\n      // this.rr.current.innerText = `keyCode: ${event.keyCode} key:  ${event.key} ctrlKey: ${event.ctrlKey}`;\n      event.preventDefault();\n    }\n  };\n\n  hideKeyboard = () => {\n    this.inputRef.current.blur();\n  }\n\n  handlePaste = (event) => {\n    event.preventDefault();\n    if(this.props.disabled || this.props.readOnly) return;\n\n    const enteredValue = stripAnyThingButDigits((event.clipboardData || window.clipboardData).getData('text'));\n\n    this.updateState(this.updateValue(event.target, enteredValue, this.props.numberFormat));\n  };\n\n  handleInput = (event) => {\n    if(this.props.disabled || this.props.readOnly) return;\n    if(this.values.valueToShow===event.target.value) return;\n\n    const enteredValue = stripAnyThingButDigits(event.target.value);\n\n    this.updateState(this.recheckValue(event.target, enteredValue, this.props.numberFormat), true);\n  };\n\n  mapValue = (value, numberFormat) => {\n    if(numberFormat===NUMBER_FORMAT_FARSI){\n      return mapToFarsi(value);\n    }else if(numberFormat===NUMBER_FORMAT_LATIN){\n      return mapToLatin(value);\n    }\n    return mapToFarsi(value);\n  };\n\n\n  updateState = (newState, forceFireChange, noFireOnChange) => {\n    if(!newState) return;\n\n    this.values = newState;\n    let fireOnChangeInTheEnd = false;\n    if(this.inputRef.current.value !== this.values.valueToShow){\n      fireOnChangeInTheEnd = true;\n      this.inputRef.current.value = this.values.valueToShow;\n    }\n    if(this.inputRef.current===document.activeElement){\n      // console.log('has focus :D');\n      this.inputRef.current.setSelectionRange(this.values.selectionStart, this.values.selectionEnd);\n    }else{\n      // console.log('has not focus :(');\n    }\n    if(fireOnChangeInTheEnd || forceFireChange){\n      if(!noFireOnChange){\n        this.fireOnChange();\n      }\n    }\n  };\n\n  updateValue = (element, enteredValue, numberFormat) => {\n    const enteredValueMapped = this.mapValue(enteredValue, numberFormat);\n    let valueToShow = element.value;\n    let selectionStart = element.selectionStart;\n    let selectionEnd = element.selectionEnd;\n\n    if(this.props.maxLength && valueToShow.length + enteredValue.length > this.props.maxLength){\n      return;\n    }\n\n    valueToShow = valueToShow.substring(0, selectionStart) + enteredValueMapped + valueToShow.substring(selectionEnd);\n\n    selectionStart += enteredValueMapped.length;\n    selectionEnd = selectionStart;\n\n    const value = mapToLatin(valueToShow);\n\n    return {\n      value,\n      valueToShow,\n      selectionStart,\n      selectionEnd,\n    };\n  };\n\n  recheckValue = (element, enteredValue, numberFormat) => {\n    let valueToShow = this.mapValue(enteredValue, numberFormat);\n    let selectionStart = element.selectionStart;\n    let selectionEnd = element.selectionEnd;\n\n    const value = mapToLatin(valueToShow);\n\n    return {\n      value,\n      valueToShow,\n      selectionStart,\n      selectionEnd,\n    };\n  };\n\n  deleteValue = (element, qty) => {\n    let valueToShow = element.value;\n    let selectionStart = element.selectionStart;\n    let selectionEnd = element.selectionEnd;\n\n    // console.log({selectionStart, selectionEnd})\n\n    if(selectionStart===selectionEnd){\n      if(qty < 0) {\n        if(selectionStart===0) return;\n        valueToShow = valueToShow.substring(0, selectionStart + qty) + valueToShow.substring(selectionEnd);\n        selectionStart += qty;\n      }else{\n        if(selectionEnd===valueToShow.length) return;\n        valueToShow = valueToShow.substring(0, selectionStart) + valueToShow.substring(selectionEnd+qty);\n      }\n    }else{\n      valueToShow = valueToShow.substring(0, selectionStart) + valueToShow.substring(selectionEnd);\n    }\n\n    selectionEnd = selectionStart;\n\n    const value = mapToLatin(valueToShow);\n\n    return {\n      value,\n      valueToShow,\n      selectionStart,\n      selectionEnd,\n    };\n  };\n\n  fireOnChange = () => {\n    if(this.props.onChange){\n      this.props.onChange({target: {name: this.props.name, value: this.values.value}});\n    }\n  };\n\n  shouldComponentUpdate(nextProps, nextState){\n    if(nextProps.value !== this.values.value || nextProps.numberFormat !== this.props.numberFormat){\n      this.updateState(this.readValuesFromProps(nextProps), false, true);\n    }\n    if(!shallowEqualObjects(nextProps.style, this.props.style)){\n      return true;\n    }\n    if(nextProps.className !== this.props.className){\n      this.inputRef.current.className = nextProps.className;\n    }\n    if(nextProps.disabled !== this.props.disabled){\n      this.inputRef.current.disabled = nextProps.disabled;\n    }\n    if(nextProps.readOnly !== this.props.readOnly){\n      this.inputRef.current.readOnly = nextProps.readOnly;\n    }\n    return false;\n  }\n\n  render() {\n    const {value, onChange, onInput, onPast, onKeyDown, pattern, inputMode, type, ref, inputRef, getInputRef, numberFormat, defaultValue, ...rest} = this.props;\n    const {valueToShow} = this.values;\n\n    // const localInputMode = this.props.type === 'tel' ? 'tel' : 'numeric'; // as we use type=tel, then we do not need it any more\n    // const localPattern = '[0-9]*'; // it has problem with the form checking, as we insert persian digit, it is not acceptable for the browser\n\n    return (\n      <input\n        ref={this.inputRef}\n        type={\"tel\"} // I tried to use text and using inputMode, but it does not work on Safari\n        // inputMode={localInputMode}\n        // xInputMode={localnputMode} // in firefox OS it is x-inputmode, I do not know how to handle it\n        dir={\"ltr\"}\n        // pattern={localPattern}\n        defaultValue={valueToShow}\n        onKeyDown={this.handleKeyDown}\n        onPaste={this.handlePaste}\n        onInput={this.handleInput}\n        {...rest}\n      />\n      );\n    //<p ref={this.rr} type={\"text\"}>empty</p></div>\n\n  }\n}\nexport default NumberInput;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport shallowEqualObjects from 'shallow-equal/objects';\n\nimport { mapToFarsi, mapToLatin, NUMBER_FORMAT_FARSI, NUMBER_FORMAT_LATIN} from './util';\n\nclass DecimalInput extends Component {\n\n  static propTypes = {\n    /**\n     * The ref to pass on the input, if empty it will be created internally\n     */\n    inputRef: PropTypes.any,\n    getInputRef: PropTypes.any,\n    /**\n     * The name that will be set while firing the onChange event in the target object\n     */\n    name: PropTypes.string,\n    /**\n     * Callback function that is fired when the cart number value changes.\n     */\n    onChange: PropTypes.func,\n    /**\n     * Override the inline-styles of the root element.\n     */\n    style: PropTypes.object,\n    /**\n     * The css class name of the root element.\n     */\n    className: PropTypes.string,\n    /**\n     * Disables the decimal input.\n     */\n    disabled: PropTypes.bool,\n    /**\n     * makes the decimal input readonly.\n     */\n    readOnly: PropTypes.bool,\n    /**\n     * Callback function that is fired when a click event occurs on the input.\n     */\n    onClick: PropTypes.func,\n    /**\n     * Callback function that is fired when the input gains focus.\n     */\n    onFocus: PropTypes.func,\n    /**\n     * Sets the value for the decimal input.\n     */\n    value: PropTypes.oneOfType([\n      PropTypes.string,\n      PropTypes.number\n    ]),\n    /**\n     * Sets the thousand separator\n     */\n    thousandSeparator: PropTypes.string,\n    /**\n     * Sets the decimal separator\n     */\n    decimalSeparator: PropTypes.string,\n    /**\n     * makes the value string, it is useful for big decimals.\n     */\n    asString: PropTypes.bool,\n    /**\n     * max digits before decimal separator.\n     */\n    maxDigits: PropTypes.number,\n    /**\n     * max digits after decimal separator.\n     */\n    maxDecimal: PropTypes.number,\n  };\n\n  constructor(props) {\n    super(props);\n    let ref = props.inputRef || props.getInputRef;\n    if(ref && typeof ref === 'function'){\n      ref = ref();\n    }\n    this.inputRef = ref ? ref : React.createRef();\n    // this.rr = React.createRef();\n\n    this.thousandSeparator = props.thousandSeparator === '' ? '' : props.thousandSeparator || this.defaultThousandSeparator();\n    this.decimalSeparator = props.decimalSeparator || this.defaultDecimalSeparator();\n    this.thousandSeparatorRegex = new RegExp(`[${this.thousandSeparator}]`, 'g');\n    this.decimalSeparatorRegex = new RegExp(`[.${this.decimalSeparator}]`, 'g');\n    this.numberRegex = new RegExp(`[^-1234567890۱۲۳۴۵۶۷۸۹۰.${this.decimalSeparator}]`, 'gi');\n    this.values = this.readValuesFromProps(props);\n  }\n\n  defaultThousandSeparator = () => {\n    return ',';\n  };\n\n  defaultDecimalSeparator = () => {\n    return '.';\n  };\n\n  readValuesFromProps = (props) => {\n    if(props.value || props.value===0){\n      const value = props.value.toString();\n      return this.updateValue('', 0, 0, value, props.numberFormat, props.asString);\n    }\n\n    return {\n      value: undefined,\n      valueToShow: '',\n      selectionStart: undefined,\n      selectionEnd: undefined,\n    };\n  };\n\n  handleKeyDown = (event) => {\n    // console.log('keyCode: ', event.keyCode, 'key: ', event.key);\n    if(this.props.disabled || this.props.readOnly) {\n      event.preventDefault();\n    }else if(event.keyCode===8) { //backspace\n      event.preventDefault();\n      this.updateState(this.deleteValue(event.target, -1, this.props.asString));\n    }else if(event.keyCode===46){ //delete\n      event.preventDefault();\n      this.updateState(this.deleteValue(event.target, 1, this.props.asString));\n    }else if(event.keyCode>=48 && event.keyCode<=57){ //digits\n      event.preventDefault();\n      // console.log('digit');\n      this.updateState(this.updateElementValue(event.target, (event.keyCode - 48).toString(), this.props.numberFormat, this.props.asString));\n    }else if(event.keyCode>=96 && event.keyCode<=105){ //digits\n      event.preventDefault();\n      // console.log('digit');\n      this.updateState(this.updateElementValue(event.target, (event.keyCode - 96).toString(), this.props.numberFormat, this.props.asString));\n    }else if(event.key>='۰' && event.key<='۹'){ //digits\n      event.preventDefault();\n      // console.log('digit');\n      this.updateState(this.updateElementValue(event.target, event.key, this.props.numberFormat, this.props.asString));\n    }else if(event.key===this.decimalSeparator || event.keyCode===190){ //point\n      event.preventDefault();\n      if(this.props.maxDecimal===null || this.props.maxDecimal===undefined || this.props.maxDecimal > 0){\n        this.updateState(this.updateElementValue(event.target, this.decimalSeparator, this.props.numberFormat, this.props.asString));\n      }\n    }else if(event.key==='-' || event.keyCode===189){ // -\n      event.preventDefault();\n      this.updateState(this.negate());\n    }else if(event.keyCode>=35 && event.keyCode<=40){ //arrows\n    }else if(event.keyCode===9){ //tab\n    }else if(event.keyCode===13){ //return\n      this.hideKeyboard();\n    }else if((event.ctrlKey || event.metaKey) && (event.keyCode===67 || event.keyCode===86)){ //copy/paste\n    }else if((event.ctrlKey || event.metaKey) && (event.keyCode===82)){ //refresh key\n    }else if((event.ctrlKey || event.metaKey) && (event.keyCode===82)){ //refresh key\n    }else if((event.ctrlKey || event.metaKey) && (event.keyCode===73)){ //inspector\n    }else if((event.ctrlKey || event.metaKey) && (event.keyCode===65)){ //select all\n    }else if((event.ctrlKey || event.metaKey) && (event.keyCode===76)){ //location focus\n    }else if(event.keyCode>=112 && event.keyCode<=123){ // All other F keys\n    }else if(event.keyCode===229){ //android bug workaround\n    }else{\n      // console.log('other');\n      // console.log('keyCode: ', event.keyCode, 'key: ', event.key, 'ctrlKey: ', event.ctrlKey);\n      // this.rr.current.innerText = `keyCode: ${event.keyCode} key:  ${event.key} ctrlKey: ${event.ctrlKey}`;\n      event.preventDefault();\n    }\n  };\n\n  hideKeyboard = () => {\n    this.inputRef.current.blur();\n  }\n\n  handlePaste = (event) => {\n    event.preventDefault();\n    if(this.props.disabled || this.props.readOnly) return;\n\n    let enteredValue = this.stripAnyThingButNumber((event.clipboardData || window.clipboardData).getData('text'));\n    if(this.values.valueToShow!==''){\n      enteredValue = enteredValue.replace(/[-]/g, '');\n    }\n\n    this.updateState(this.updateElementValue(event.target, enteredValue, this.props.numberFormat, this.props.asString));\n  };\n\n  handleInput = (event) => {\n    if(this.values.valueToShow===event.target.value) return;\n    if(this.props.disabled || this.props.readOnly) return;\n\n    const enteredValue = this.stripAnyThingButNumber(event.target.value);\n\n    const firstHyphenIndex = enteredValue.indexOf('-');\n    const secondHyphenIndex = enteredValue.indexOf('-', firstHyphenIndex + 1);\n    if(secondHyphenIndex >= 0 || firstHyphenIndex > 0){\n      this.updateState(this.negate());\n    }else{\n      const selectionStart = event.target.selectionStart;\n      const selectionEnd = event.target.selectionEnd;\n      const newState = this.updateValue('', selectionStart, selectionEnd, enteredValue, this.props.numberFormat, this.props.asString);\n      this.updateState(newState, true);\n    }\n  };\n\n  mapValue = (value, numberFormat) => {\n    if(numberFormat===NUMBER_FORMAT_FARSI){\n      return mapToFarsi(value);\n    }else if(numberFormat===NUMBER_FORMAT_LATIN){\n      return mapToLatin(value);\n    }\n    return mapToFarsi(value);\n  };\n\n  mapDecimalSeparator = (value) => {\n    return value.replace(this.decimalSeparatorRegex, this.decimalSeparator);\n  };\n\n\n  updateState = (newState, forceFireChange, noFireOnChange) => {\n    if(!newState) return;\n\n    this.values = newState;\n    let fireOnChangeInTheEnd = false;\n    if(this.inputRef.current.value !== this.values.valueToShow){\n      fireOnChangeInTheEnd = true;\n      this.inputRef.current.value = this.values.valueToShow;\n    }\n    if(this.inputRef.current===document.activeElement){\n      // console.log('has focus :D');\n      this.inputRef.current.setSelectionRange(this.values.selectionStart, this.values.selectionEnd);\n    }else{\n      // console.log('has not focus :(');\n    }\n    if(fireOnChangeInTheEnd || forceFireChange){\n      if(!noFireOnChange){\n        this.fireOnChange();\n      }\n    }\n  };\n\n  negate = () => {\n    let {value,\n    valueToShow,\n    valueIsValid,\n    selectionStart,\n    selectionEnd} = this.values;\n\n    if(value > 0) {\n      value = -value;\n      valueToShow = '-'+valueToShow;\n      selectionStart++;\n      selectionEnd++;\n    }else if(value < 0) {\n      value = -value;\n      valueToShow = valueToShow.substring(1);\n      selectionStart--;\n      selectionEnd--;\n    }else{\n      return;\n    }\n\n    return {\n      value,\n      valueToShow,\n      valueIsValid,\n      selectionStart,\n      selectionEnd,\n    };\n  };\n\n  updateElementValue = (element, enteredValue, numberFormat, asString) => {\n    let currentValue = element.value;\n    let selectionStart = element.selectionStart;\n    let selectionEnd = element.selectionEnd;\n    return this.updateValue(currentValue, selectionStart, selectionEnd, enteredValue, numberFormat, asString);\n  }\n\n  updateValue = (currentValue, selectionStart, selectionEnd, enteredValue, numberFormat, asString) => {\n    const enteredValueMapped = this.mapDecimalSeparator(this.mapValue(enteredValue, numberFormat));\n    let valueToShow = currentValue;\n    if(enteredValueMapped===this.decimalSeparator){\n      const i = valueToShow.indexOf(this.decimalSeparator);\n      if(i>-1){\n        return;\n      }\n    }\n\n    let valueBeforeCursor = valueToShow.substring(0, selectionStart);\n    let valueAfterCursor = valueToShow.substring(selectionEnd);\n\n    selectionStart -= this.countThousandSeparator(valueBeforeCursor);\n    valueBeforeCursor = this.stripThousandSeparator(valueBeforeCursor);\n    valueAfterCursor = this.stripThousandSeparator(valueAfterCursor);\n\n    valueToShow = valueBeforeCursor + enteredValueMapped + valueAfterCursor;\n    selectionStart += enteredValueMapped.length;\n\n    if(typeof this.props.maxDecimal === 'number'){\n      const i = valueToShow.indexOf(this.decimalSeparator);\n      if(i>-1){\n        const decimalLength = valueToShow.length - i - 1;\n        if(decimalLength > this.props.maxDecimal){\n          valueToShow = valueToShow.substring(0, i + (this.props.maxDecimal? 1 : 0) + this.props.maxDecimal);\n          if(selectionStart>valueToShow.length) selectionStart = valueToShow.length;\n        }\n      }\n    }\n    {\n      const latinNumber = mapToLatin(valueToShow);\n      const i = this.firstNonZeroDigit(latinNumber, 0);\n      if(i > 0 && valueToShow.length>1){\n        valueToShow = valueToShow.substring(i);\n        selectionStart -= i;\n      }else if(i===0 && latinNumber.charAt(0)==='.'){\n        valueToShow = this.mapValue('0', numberFormat) + valueToShow;\n        selectionStart++;\n      }\n    }\n    if(typeof this.props.maxDigits === 'number'){\n      const i = valueToShow.indexOf(this.decimalSeparator);\n      const digitsLength = i>-1 ? i : valueToShow.length;\n      if(digitsLength > this.props.maxDigits){\n        if(i===-1){\n          valueToShow = valueToShow.substring(0, this.props.maxDigits);\n          if(selectionStart>valueToShow.length) selectionStart = valueToShow.length;\n        }else{\n          valueToShow = valueToShow.substring(0, this.props.maxDigits) + (i===-1 ? '' : valueToShow.substring(i));\n          if(selectionStart>this.props.maxDigits) selectionStart = this.props.maxDigits;\n        }\n      }\n    }\n\n    const separated = this.addThousandSeparator(valueToShow, selectionStart);\n    valueToShow = separated.valueToShowWithSeparator;\n    selectionStart = separated.selectionStart;\n    selectionEnd = selectionStart;\n\n    let value = this.stripThousandSeparator(mapToLatin(valueToShow));\n    let valueIsValid;\n    if(asString) {\n      const checkValue = Number(value);\n      valueIsValid = (typeof checkValue === 'number' || checkValue === undefined || checkValue === null);\n    }else{\n      value = Number(value);\n      valueIsValid = (typeof value === 'number' || value === undefined || value === null);\n    }\n\n    return {\n      value,\n      valueToShow,\n      valueIsValid,\n      selectionStart,\n      selectionEnd,\n    };\n  };\n\n  deleteValue = (element, qty, asString) => {\n    let valueToShow = element.value;\n    let selectionStart = element.selectionStart;\n    let selectionEnd = element.selectionEnd;\n\n    // console.log({selectionStart, selectionEnd})\n\n    if(selectionStart===selectionEnd){\n      if(qty < 0) {\n        if(selectionStart===0) return;\n        let valueBeforeCursor = valueToShow.substring(0, selectionStart + qty);\n        let valueAfterCursor = valueToShow.substring(selectionEnd);\n    \n        selectionStart -= this.countThousandSeparator(valueBeforeCursor);\n        valueBeforeCursor = this.stripThousandSeparator(valueBeforeCursor);\n        valueAfterCursor = this.stripThousandSeparator(valueAfterCursor);\n    \n        valueToShow = valueBeforeCursor + valueAfterCursor;\n        selectionStart += qty;\n      }else{\n        if(selectionEnd===valueToShow.length) return;\n        let valueBeforeCursor = valueToShow.substring(0, selectionStart);\n        let valueAfterCursor = valueToShow.substring(selectionEnd+qty);\n    \n        selectionStart -= this.countThousandSeparator(valueBeforeCursor);\n        valueBeforeCursor = this.stripThousandSeparator(valueBeforeCursor);\n        valueAfterCursor = this.stripThousandSeparator(valueAfterCursor);\n    \n        valueToShow = valueBeforeCursor + valueAfterCursor;\n      }\n    }else{\n      let valueBeforeCursor = valueToShow.substring(0, selectionStart);\n      let valueAfterCursor = valueToShow.substring(selectionEnd);\n  \n      selectionStart -= this.countThousandSeparator(valueBeforeCursor);\n      valueBeforeCursor = this.stripThousandSeparator(valueBeforeCursor);\n      valueAfterCursor = this.stripThousandSeparator(valueAfterCursor);\n  \n      valueToShow = valueBeforeCursor + valueAfterCursor;\n    }\n\n    const separated = this.addThousandSeparator(valueToShow, selectionStart);\n    valueToShow = separated.valueToShowWithSeparator;\n    selectionStart = separated.selectionStart;\n    selectionEnd = selectionStart;\n\n    let value = this.stripThousandSeparator(mapToLatin(valueToShow));\n    let valueIsValid;\n    if(asString) {\n      const checkValue = Number(value);\n      valueIsValid = (typeof checkValue === 'number' || checkValue === undefined || checkValue === null);\n    }else{\n      value = Number(value);\n      valueIsValid = (typeof value === 'number' || value === undefined || value === null);\n    }\n\n\n    return {\n      value,\n      valueToShow,\n      valueIsValid,\n      selectionStart,\n      selectionEnd,\n    };\n  };\n\n\n  addThousandSeparator = (valueToShow, selectionStart) => {\n    if(this.thousandSeparator==='')\n      return {valueToShowWithSeparator: valueToShow, selectionStart};\n    let valueToShowWithSeparator = '';\n    let alreadFoundDecimalSeparator = false;\n    let alreadyPassedDecimalSeparator = valueToShow.indexOf(this.decimalSeparator) === -1;\n    let groupCount = 0;\n    for (let i = valueToShow.length-1; i>=0; i--){\n      const c = valueToShow.charAt(i);\n      if(c===this.decimalSeparator){\n        if(!alreadFoundDecimalSeparator){\n          alreadFoundDecimalSeparator = true;\n          valueToShowWithSeparator = c + valueToShowWithSeparator;\n          alreadyPassedDecimalSeparator = true;\n          groupCount = 0;\n        }else{\n          if(i <= selectionStart){\n            selectionStart--;\n          }\n        }\n      }else{\n        if(alreadyPassedDecimalSeparator && groupCount===3 && c!=='-'){\n          valueToShowWithSeparator = this.thousandSeparator + valueToShowWithSeparator;\n          groupCount = 0;\n          if(i<selectionStart-1){\n            selectionStart++;\n          }\n        }\n        valueToShowWithSeparator = c + valueToShowWithSeparator;\n        groupCount++;\n      }\n    }\n    return {valueToShowWithSeparator, selectionStart};\n  };\n\n  firstNonZeroDigit = (value, i) => {\n    if(value.charAt(i)===this.decimalSeparator) {\n      if(i>0)\n        return i - 1;\n      else return i;\n    }\n    if(value.charAt(i)==='0') return this.firstNonZeroDigit(value, i+1);\n    return i;\n  };\n\n  countThousandSeparator = (value) => {\n    return this.thousandSeparator === '' ? 0 : (value.match(this.thousandSeparatorRegex) || []).length;\n  };\n\n  stripThousandSeparator = (value) => {\n    return this.thousandSeparator === '' ? value : value.replace(this.thousandSeparatorRegex, '');\n  };\n\n  stripAnyThingButNumber = (str) => {\n    if(!str) return str;\n    return str.toString().replace(this.numberRegex, '');\n  };\n  \n  fireOnChange = () => {\n    if(this.props.onChange){\n      this.props.onChange({target: {name: this.props.name, value: this.values.value}});\n    }\n  };\n\n  shouldComponentUpdate(nextProps, nextState){\n    if(nextProps.value !== this.values.value || nextProps.numberFormat !== this.props.numberFormat){\n      this.updateState(this.readValuesFromProps(nextProps), false, true);\n    }\n    if(!shallowEqualObjects(nextProps.style, this.props.style)){\n      return true;\n    }\n    if(nextProps.className !== this.props.className){\n      this.inputRef.current.className = nextProps.className;\n    }\n    if(nextProps.disabled !== this.props.disabled){\n      this.inputRef.current.disabled = nextProps.disabled;\n    }\n    if(nextProps.readOnly !== this.props.readOnly){\n      this.inputRef.current.readOnly = nextProps.readOnly;\n    }\n    return false;\n  }\n\n  render() {\n    const {value, onChange, onInput, onPast, onKeyDown, pattern, inputMode, type, ref, inputRef, getInputRef, numberFormat, defaultValue, asString, maxDecimal, maxDigits, thousandSeparator, decimalSeparator, ...rest} = this.props;\n    const {valueToShow} = this.values;\n\n    // const localInputMode = this.props.type === 'tel' ? 'tel' : 'numeric'; // as we use type=tel, then we do not need it any more\n    // const localPattern = '[0-9]*'; // it has problem with the form checking, as we insert persian digit, it is not acceptable for the browser\n\n    return (\n      <input\n        ref={this.inputRef}\n        type={\"tel\"} // I tried to use text and using inputMode, but it does not work on Safari\n        // inputMode={localInputMode}\n        // xInputMode={localnputMode} // in firefox OS it is x-inputmode, I do not know how to handle it\n        dir={\"ltr\"}\n        // pattern={localPattern}\n        defaultValue={valueToShow}\n        onKeyDown={this.handleKeyDown}\n        onPaste={this.handlePaste}\n        onInput={this.handleInput}\n        {...rest}\n      />\n      );\n    //<p ref={this.rr} type={\"text\"}>empty</p></div>\n\n  }\n}\nexport default DecimalInput;\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport shallowEqualObjects from 'shallow-equal/objects';\nimport { mapToFarsi, mapToLatin, hasStringACharToGoToNext, repeatStr, NUMBER_FORMAT_FARSI, NUMBER_FORMAT_LATIN} from './util';\n\nconst CARD_SEPERATOR =  '-';\nconst SEPERATORES_REGEX = new RegExp(`[ ${CARD_SEPERATOR}]`, 'g');\nconst MATCH_REGEX = new RegExp(`[0-9]{4}[${CARD_SEPERATOR}][0-9]{4}[${CARD_SEPERATOR}][0-9]{4}[${CARD_SEPERATOR}][0-9]{4}`);\nconst EMPTY_VALUE = `    ${CARD_SEPERATOR}    ${CARD_SEPERATOR}    ${CARD_SEPERATOR}    `;\n\n\nclass CardNumberInput extends Component {\n\n  static propTypes = {\n    /**\n     * The ref to pass on the input, if empty it will be created internally\n     */\n    inputRef: PropTypes.any,\n    getInputRef: PropTypes.any,\n    /**\n     * The name that will be set while firing the onChange event in the target object\n     */\n    name: PropTypes.string,\n    /**\n     * Callback function that is fired when the cart number value changes.\n     */\n    onChange: PropTypes.func,\n    /**\n     * Override the inline-styles of the root element.\n     */\n    style: PropTypes.object,\n    /**\n     * The css class name of the root element.\n     */\n    className: PropTypes.string,\n    /**\n     * Disables the card number.\n     */\n    disabled: PropTypes.bool,\n    /**\n     * makes the card number readonly.\n     */\n    readOnly: PropTypes.bool,\n    /**\n     * Callback function that is fired when a click event occurs on the input.\n     */\n    onClick: PropTypes.func,\n    /**\n     * Callback function that is fired when the input gains focus.\n     */\n    onFocus: PropTypes.func,\n    /**\n     * Sets the value for the card number input.\n     */\n    value: PropTypes.string,\n  };\n\n  constructor(props) {\n    super(props);\n    this.emptyValue = this.emptyValue.bind(this);\n\n    let ref = props.inputRef || props.getInputRef;\n    if(ref && typeof ref === 'function'){\n      ref = ref();\n    }\n    this.inputRef = ref ? ref : React.createRef();\n    // this.rr = React.createRef();\n\n    this.values = this.readValues(props.value);\n    this.previousValue = this.values.value;\n  }\n\n\n  /**\n   * @param {string} value\n   */\n  readCardNumberFromValue = (value) => {\n    if(!value) return;\n\n    const latinNumberValue = mapToLatin(value);\n    const regEx = /[0-9]{4}[^0-9]*[0-9]{4}[^0-9]*[0-9]{4}[^0-9]*[0-9]{4}/;\n    const match = latinNumberValue.match(regEx);\n    if(match){\n      const valueWithNoSeperator = match[0].replace(/[^0-9]*/g, '');\n      return `${valueWithNoSeperator.substring(0, 4)}${CARD_SEPERATOR}${valueWithNoSeperator.substring(4, 8)}${CARD_SEPERATOR}${valueWithNoSeperator.substring(8, 12)}${CARD_SEPERATOR}${valueWithNoSeperator.substring(12, 16)}`;\n    }\n\n    const regEx4Digits = /[0-9]{4}/;\n    const match4Digit = latinNumberValue.match(regEx4Digits);\n    if(match4Digit){\n      this.updateState(this.updateValue(this.inputRef.current, match4Digit[0], this.props.numberFormat));\n      return;\n    }\n\n  }\n    \n  readValues = (value) => {\n    const valueToShow = this.mapValue(value, this.props.numberFormat);\n    const valueIsValid = this.isValueValidCardNumber(value);\n\n    return {\n      value,\n      valueToShow,\n      valueIsValid,\n      selectionStart: undefined,\n      selectionEnd: undefined,\n    };\n  };\n\n  emptyValue() {\n    this.updateState(this.resetValues());\n  };\n\n  handleFocus = (event) => {\n    if(this.isValueEmpty(this.values.value)){\n      this.jumpTo(1);\n    }\n    if(this.props.onFocus){\n      this.props.onFocus(event);\n    }\n  };\n\n  handleBlur = (event) => {\n    if(this.props.onBlur){\n      this.props.onBlur(event);\n    }\n  };\n\n  jumpToNext = () => {\n    const selectionStart = this.inputRef.current.selectionStart;\n    const whereTheCaretIs = this.whereIsCaret(selectionStart);\n\n    if(whereTheCaretIs < 4){\n      this.jumpTo(whereTheCaretIs + 1);\n      return true;\n    }\n    return false;\n  };\n\n  jumpToPrevious = () => {\n    const selectionStart = this.inputRef.current.selectionStart;\n    const whereTheCaretIs = this.whereIsCaret(selectionStart);\n\n    if(whereTheCaretIs > 1){\n      this.jumpTo(whereTheCaretIs - 1);\n      return true;\n    }\n    return false;\n  };\n\n  isValueEmpty = (value) => {\n    if(value.replace(SEPERATORES_REGEX, '')==='') return true;\n    return false;\n  }; \n\n  /**\n   * @param {number} section\n   *  */\n  jumpTo = (section) => {\n    const caretPosition = (section - 1) * 5;\n    this.values.selectionStart = caretPosition;\n    this.values.selectionEnd = caretPosition;\n    this.inputRef.current.setSelectionRange(this.values.selectionStart, this.values.selectionEnd);\n  };\n\n  handleKeyDown = (event) => {\n    // console.log('keyCode: ', event.keyCode, 'key: ', event.key);\n    if(this.props.disabled || this.props.readOnly) {\n      event.preventDefault();\n    }else if(event.keyCode===8) { //backspace\n      event.preventDefault();\n      this.updateState(this.deleteValue(event.target, -1));\n    }else if(event.keyCode===46){ //delete\n      event.preventDefault();\n      this.updateState(this.deleteValue(event.target, 1));\n    }else if(event.keyCode>=48 && event.keyCode<=57){ //digits\n      event.preventDefault();\n      // console.log('digit');\n      this.updateState(this.updateValue(event.target, (event.keyCode - 48).toString(), this.props.numberFormat));\n    }else if(event.keyCode>=96 && event.keyCode<=105){ //digits\n      event.preventDefault();\n      // console.log('digit');\n      this.updateState(this.updateValue(event.target, (event.keyCode - 96).toString(), this.props.numberFormat));\n    }else if(event.key>='۰' && event.key<='۹'){ //digits\n      event.preventDefault();\n      // console.log('digit');\n      this.updateState(this.updateValue(event.target, event.key, this.props.numberFormat));\n    }else if(event.key==='.' || event.key==='/' || event.key==='-' || event.key==='*' || event.key==='#' \n             || \n             event.keyCode===188 || event.keyCode===189 || event.keyCode===190 || event.keyCode===191 \n             ){\n      event.preventDefault();\n      if(event.ctrlKey || event.shiftKey || event.metaKey || event.key==='#'){\n        this.jumpToPrevious();\n      }else{\n        this.jumpToNext();\n      }\n    }else if(event.keyCode>=36 && event.keyCode<=40){ //arrows\n    }else if(event.keyCode===9){ //tab\n      if(Math.abs(this.inputRef.current.selectionStart - this.inputRef.current.selectionEnd)===this.inputRef.current.value.length){\n        return;\n      }\n      if(event.ctrlKey || event.shiftKey || event.metaKey){\n        if(this.jumpToPrevious()) event.preventDefault();\n      }else{\n        if(this.jumpToNext()) event.preventDefault();\n      }\n    }else if(event.keyCode===13){ //return\n      this.hideKeyboard();\n    }else if((event.ctrlKey || event.metaKey) && (event.keyCode===67 || event.keyCode===86)){ //copy/paste\n    }else if((event.ctrlKey || event.metaKey) && (event.keyCode===82)){ //refresh key\n    }else if((event.ctrlKey || event.metaKey) && (event.keyCode===73)){ //inspector\n    }else if((event.ctrlKey || event.metaKey) && (event.keyCode===65)){ //select all\n    }else if((event.ctrlKey || event.metaKey) && (event.keyCode===76)){ //location focus\n    }else if(event.keyCode===115){ // F4\n      if(this.props.onShowDialog) {\n        event.preventDefault();\n        this.props.onShowDialog();\n      }\n    }else if(event.keyCode>=112 && event.keyCode<=123){ // All other F keys\n    }else if(event.keyCode===229){ //android bug workaround\n      //K1 : I guess that we have to save the caret position as the input will change it, we need it to know where we have to jump to in handleInput function\n      this.values.selectionStart = this.inputRef.current.selectionStart;\n      this.values.selectionEnd = this.inputRef.current.selectionEnd;\n      //  this.rr.current.innerText = `setting ss to ${this.values.selectionStart}  ${this.values.selectionEnd}`;\n\n    }else{\n      // console.log('other');\n      // console.log('keyCode: ', event.keyCode, 'key: ', event.key, 'ctrlKey: ', event.ctrlKey);\n      //  this.rr.current.innerText = `keyCode: ${event.keyCode} key:  ${event.key} ctrlKey: ${event.ctrlKey}`;\n      event.preventDefault();\n    }\n  };\n\n  hideKeyboard = () => {\n    this.inputRef.current.blur();\n  }\n\n  handlePaste = (event) => {\n    event.preventDefault();\n    if(this.props.disabled || this.props.readOnly) return;\n\n    const valueFromClipboard = this.readCardNumberFromValue((event.clipboardData || window.clipboardData).getData('text'));\n    if(!valueFromClipboard) return;\n\n    const values = this.readValues(valueFromClipboard);\n\n    if(values.valueIsValid){\n      this.updateState(values);\n    }\n  };\n\n  handleInput = (event) => {\n    event.preventDefault();\n    if(this.props.disabled || this.props.readOnly) return;\n    if(this.values.valueToShow===event.target.value) return;\n    const inputValue = event.target.value;\n    // const enteredValue = stripAnyThingButDigits(event.target.value);\n    // this.rr.current.innerText = `V : ${inputValue}`;\n    \n    if(this.inputRef.current.value !== this.values.valueToShow){\n      this.inputRef.current.value = this.values.valueToShow;\n      this.inputRef.current.setSelectionRange(this.values.selectionStart, this.values.selectionEnd);\n    }\n\n    if(hasStringACharToGoToNext(inputValue)){\n      this.jumpToNext();\n    }\n\n    // this.updateState(this.rollbackValue());\n  };\n\n  /**\n   * @param {string} value\n   */\n  mapValue = (value, numberFormat) => {\n    if(numberFormat===NUMBER_FORMAT_FARSI){\n      const mapped = mapToFarsi(value);\n      return mapped;\n    }else if(numberFormat===NUMBER_FORMAT_LATIN){\n      const mapped = mapToLatin(value);\n      return mapped;\n    }\n    const mapped = mapToFarsi(value);\n    return mapped;\n  };\n\n\n  updateState = (newState, noFireOnChange) => {\n    if(!newState) return;\n\n    this.values = newState;\n\n    if(this.values.valueIsValid===undefined){\n      this.values.valueIsValid = this.isValueValidCardNumber(this.values.value);\n    }\n\n    let fireOnChangeInTheEnd = false;\n    //console.log('values on updateState', this.values)\n    if(this.inputRef.current.value !== this.values.valueToShow){\n      fireOnChangeInTheEnd = true;\n      this.inputRef.current.value = this.values.valueToShow;\n    }\n    if(this.inputRef.current===document.activeElement){\n      // console.log('has focus :D');\n      this.inputRef.current.setSelectionRange(this.values.selectionStart, this.values.selectionEnd);\n    }else{\n      // console.log('has not focus :(');\n    }\n    if(fireOnChangeInTheEnd){\n      if(!noFireOnChange){\n        this.fireOnChange();\n      }\n    }\n  };\n\n  updateValue = (element, enteredValue, numberFormat) => {\n    const enteredValueMapped = this.mapValue(enteredValue, numberFormat);\n    let valueToShow = element.value;\n    if(valueToShow===''){\n      valueToShow = EMPTY_VALUE;\n    }\n    let selectionStart = element.selectionStart;\n    let selectionEnd = element.selectionEnd;\n\n    valueToShow = valueToShow.substring(0, selectionStart) + enteredValueMapped + valueToShow.substring(selectionEnd);\n    selectionStart += enteredValueMapped.length;\n\n    const seperatorBefore = valueToShow.lastIndexOf(CARD_SEPERATOR, selectionStart - 1) + 1;\n    let seperatorAfter = valueToShow.indexOf(CARD_SEPERATOR, selectionStart);\n    if(seperatorAfter===-1) seperatorAfter = valueToShow.length;\n    if(seperatorAfter - seperatorBefore > 4) {\n      if(selectionStart - seperatorBefore >= 4){\n        valueToShow = valueToShow.substring(0, seperatorBefore) + valueToShow.substring(selectionStart - 4, selectionStart) + valueToShow.substring(seperatorAfter);\n        selectionStart = seperatorBefore + 4;\n      }else{\n        valueToShow = valueToShow.substring(0, seperatorBefore + 4) + valueToShow.substring(seperatorAfter);\n      }\n    }\n\n\n\n    const value = mapToLatin(valueToShow);\n    const valueIsValid = this.isValueValidCardNumber(value);\n\n    if(selectionStart < valueToShow.length && value.substring(selectionStart - 4, selectionStart).match(/[0-9]{4}/)){\n      selectionStart++;\n    }\n    selectionEnd = selectionStart;\n\n    const values = {\n      value,\n      valueToShow,\n      valueIsValid,\n      selectionStart,\n      selectionEnd,\n    };\n\n    return values; \n  };\n\n  /**\n   * @param {number} selectionStart\n   */\n  whereIsCaret = (selectionStart) => {\n    return Math.floor(selectionStart / 5) + 1;\n  };\n\n  /**\n   * @param {string} value\n   */\n  isValueValidCardNumber = (value) => {\n    if(!value) return false;\n    if(value.match(MATCH_REGEX)) return true;\n    return false;\n  };\n\n  resetValues = () => {\n    const value = '';\n    return {\n      value,\n      valueToShow: this.mapValue(value, this.props.numberFormat),\n      valueIsValid: false,\n      selectionStart: 0,\n      selectionEnd: 0,\n    };\n  };\n\n  deleteValue = (element, qty) => {\n    let valueToShow = element.value;\n    let selectionStart = element.selectionStart;\n    let selectionEnd = element.selectionEnd;\n\n    if(selectionStart===selectionEnd){\n      if(qty < 0) {\n        if(selectionStart===0) return;\n        if(valueToShow.substring(selectionStart + qty, selectionStart)===CARD_SEPERATOR) {\n          const newValues = {...this.values};\n          newValues.selectionStart--;\n          newValues.selectionEnd--;\n          return newValues;\n        }\n        valueToShow = valueToShow.substring(0, selectionStart + qty) + valueToShow.substring(selectionEnd);\n        selectionStart += qty;\n      }else{\n        if(selectionEnd===valueToShow.length) return;\n        if(valueToShow.substring(selectionStart, selectionStart + qty)===CARD_SEPERATOR) return;\n        valueToShow = valueToShow.substring(0, selectionStart) + valueToShow.substring(selectionEnd+qty);\n      }\n      const nextSeperator = valueToShow.indexOf(CARD_SEPERATOR, selectionStart);\n      if(nextSeperator===-1){\n        valueToShow = valueToShow + ' ';\n      }else{\n        valueToShow = valueToShow.substring(0, nextSeperator) +repeatStr(' ', Math.abs(qty))+ valueToShow.substring(nextSeperator);\n      }\n    }else{\n      if(valueToShow.substring(selectionStart, selectionEnd).indexOf(CARD_SEPERATOR)>=0){\n        valueToShow = '';\n        selectionStart = 0;\n      }else {\n        valueToShow = valueToShow.substring(0, selectionStart) +repeatStr(' ', selectionEnd-selectionStart)+ valueToShow.substring(selectionEnd);\n      }\n    }\n\n    selectionEnd = selectionStart;\n\n    const value = mapToLatin(valueToShow);\n    const valueIsValid = this.isValueValidCardNumber(value);\n\n    const values = {\n      value,\n      valueToShow,\n      valueIsValid,\n      selectionStart,\n      selectionEnd,\n    };\n\n    return values; \n  };\n\n  fireOnChange = () => {\n    if(this.props.onChange){\n      const value = this.values.value;\n      if(this.previousValue !== value){\n        this.previousValue = value;\n        const target = {\n          name: this.props.name,\n          value: this.values.value,\n          valueIsValid: this.values.valueIsValid,\n        };\n        this.props.onChange({target});\n      }\n    }\n  };\n\n  shouldComponentUpdate(nextProps, nextState){\n    if(nextProps.value !== this.values.value || nextProps.numberFormat !== this.props.numberFormat){\n      this.updateState(this.readValues(nextProps.value), true);\n    }\n    if(!shallowEqualObjects(nextProps.style, this.props.style)){\n      return true;\n    }\n    if(nextProps.className !== this.props.className){\n      this.inputRef.current.className = nextProps.className;\n    }\n    if(nextProps.disabled !== this.props.disabled){\n      this.inputRef.current.disabled = nextProps.disabled;\n    }\n    if(nextProps.readOnly !== this.props.readOnly){\n      this.inputRef.current.readOnly = nextProps.readOnly;\n    }\n    return false;\n  }\n\n  render() {\n    const {value, onChange, onFocus, onBlur, onInput, onPast, onKeyDown, onShowDialog, pattern, inputMode, type, inputRef, getInputRef, numberFormat, defaultValue, ...rest} = this.props;\n    const {valueToShow} = this.values;\n\n    // const localInputMode = this.props.type === 'tel' ? 'tel' : 'numeric'; // as we use type=tel, then we do not need it any more\n    // const localPattern = '[0-9]*'; // it has problem with the form checking, as we insert persian digit, it is not acceptable for the browser\n\n    return (\n      <input\n        ref={this.inputRef}\n        type={\"tel\"} // I tried to use text and using inputMode, but it does not work on Safari\n        // inputMode={localInputMode}\n        // xInputMode={localnputMode} // in firefox OS it is x-inputmode, I do not know how to handle it\n        dir={\"ltr\"}\n        // pattern={localPattern}\n        defaultValue={valueToShow}\n        onKeyDown={this.handleKeyDown}\n        onPaste={this.handlePaste}\n        onInput={this.handleInput}\n        onFocus={this.handleFocus}\n        onBlur={this.handleBlur}\n        {...rest}\n      />\n      );\n    //<p ref={this.rr} type={\"text\"}>empty</p></div>\n\n  }\n}\n\n\nexport default CardNumberInput;","import React, { Component } from 'react';\nimport { NumberInput, DecimalInput, CardNumberInput, NUMBER_FORMAT_FARSI } from \"./lib\";\nimport {NUMBER_FORMAT_LATIN} from './lib';\nimport './Example.css';\n\nclass Example extends Component {\n  state = {\n    Number1: '123',\n    Number2: '',\n    Number3: 1200.246,\n    color: false,\n    bgColor: false,\n    disabled: false,\n    readOnly: false,\n    Tel1: '0912',\n    value1: '',\n  };\n\n  componentDidMount(){\n    // this.interval = setInterval(this.toggleBgColor, 6000);\n    // this.interval = setInterval(this.toggleColor, 3000);\n  }\n\n  componentWillUnmount(){\n    clearInterval(this.interval);\n  }\n\n  handleChange = (event) => {\n    const newState = {};\n    const t = event.target;\n\n    newState[t.name] = t.value;\n    this.setState(newState, ()=>{\n      console.log('state', this.state)\n    });\n  };\n\n  handleValueChange = (event) => {\n    const newState = {};\n    const t = event.target;\n\n    newState[t.name.substr(0, 7)] = t.value;\n    this.setState(newState, ()=>{\n      console.log('state', this.state)\n    });\n  };\n\n  toggleColor = () => {\n    this.setState({\n      color: !this.state.color,\n    })\n  };\n\n  toggleBgColor = () => {\n    this.setState({\n      bgColor: !this.state.bgColor,\n    })\n  };\n\n  toggleDisabled = () => {\n    this.setState({\n      disabled: !this.state.disabled,\n    })\n  };\n\n  toggleReadOnly = () => {\n    this.setState({\n      readOnly: !this.state.readOnly,\n    })\n  };\n\n  render(){\n    const className = this.state.color ? \"red\" : \"\";\n    const style = this.state.bgColor ? {backgroundColor: 'aqua'} : {};\n    const {disabled, readOnly} = this.state;\n\n\n    return (\n      <React.Fragment>\n        <form autoComplete=\"on\">\n        <div>\n          <br/>\n          <br/>\n          <label>خروجی عدد لاتین\n            <br/>\n            <input type=\"text\" name=\"Number1_value\" style={{width: 250}} value={this.state.Number1} onChange={this.handleValueChange}  placeholder=\"از اینجا کلید تب را چند بار بزنید\" />\n          </label>\n          <br/>\n          <br/>\n          <label>\n            نمونه فارسی\n            <br/>\n            <NumberInput name=\"Number1\" disabled={disabled} readOnly={readOnly} className={className} style={style} value={this.state.Number1} onChange={this.handleChange} placeholder=\"type/paste a number\" />\n          </label>\n        </div>\n        <br/>\n        <div>\n          <label>\n            نمونه لاتین\n            <br/>\n            <NumberInput name=\"Number2\" disabled={disabled} readOnly={readOnly} className={className} style={style} value={this.state.Number2} numberFormat={NUMBER_FORMAT_LATIN} onChange={this.handleChange} placeholder=\"type/paste a number\" />\n          </label>\n        </div>\n        <label>خروجی\n          <br/>\n          <input type=\"text\" name=\"Number2_value\" style={{width: 250}} value={this.state.Number2} onChange={this.handleValueChange} placeholder=\"این فیلد خروجی است\" />\n        </label>\n        <br/>\n        <br/>\n        <br/>\n        <div>\n          <label>\n            عدد اعشاری\n            <br/>\n            <DecimalInput name=\"Number3\" disabled={disabled} readOnly={readOnly} className={className} style={style} value={this.state.Number3} asString={false} maxDigits={5} maxDecimal={2} numberFormat={NUMBER_FORMAT_FARSI} onChange={this.handleChange} placeholder=\"type/paste a number\" />\n          </label>\n        </div>\n        <label>خروجی\n          <br/>\n          <input type=\"text\" name=\"Number3_value\" style={{width: 250}} value={this.state.Number3} onChange={this.handleValueChange} placeholder=\"این فیلد خروجی است\" />\n        </label>\n        <br/>\n        <br/>\n        <div>\n          <label>\n            نمونه تلفن فارسی\n            <br/>\n            <NumberInput type=\"tel\" name=\"Tel1\" disabled={disabled} readOnly={readOnly} className={className} style={style} value={this.state.Tel1} onChange={this.handleChange} maxLength={12} placeholder=\"type/paste a number\" />\n          </label>\n        </div>\n        <br/>\n        <label>ورودی شماره کارت\n            <br/>\n            <CardNumberInput\n              value={this.state.value1}\n              disabled={disabled}\n              readOnly={readOnly}\n              name={'value1'}\n              className={className} \n              style={style} \n              onChange={this.handleChange}\n              placeholder=\"شماره کارت\" />\n            <br/>\n            خروجی\n            <br/>\n            <input type=\"text\" name=\"value1\" dir={'ltr'} value={this.state.value1} onChange={this.handleChange}/>\n          </label>\n          <br/>\n        <br/>\n        <button type=\"button\" onClick={this.toggleColor}>toggle className</button>\n        <button type=\"button\" onClick={this.toggleBgColor}>toggle style</button>\n        <button type=\"button\" onClick={this.toggleDisabled}>{disabled?'enable':'disable'}</button>\n        <button type=\"button\" onClick={this.toggleReadOnly}>{readOnly?'writable':'read only'}</button>\n        <input type=\"submit\"/>\n        </form>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default Example;\n","import React from 'react';\nimport { render } from \"react-dom\";\nimport Example from './Example';\n\nconst App = () => (\n  <div dir={\"rtl\"} style={{ width: 640, margin: \"15px auto\" }}>\n    <h1>کمپننت عدد</h1>\n    <br/>ورژن ۱،۰ ساخت ۱۰\n    <ul>\n      <li>نمایش عدد فارسی یا لاتین</li>\n      <li>ذخیره عدد لاتین، باعث میشود که داده صحیح به سرور داده شود</li>\n      <li>نمایش غیر عدد در صورتی که داده از بیرون به آن وارد شود.</li>\n      <li>نمایش کیبورد عددی در مبایل (غیر از مرورگر سامسونگ) </li>\n    </ul>\n\n    <Example/>\n\n  </div>\n);\n\nrender(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}